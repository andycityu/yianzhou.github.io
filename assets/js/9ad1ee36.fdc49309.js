"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5415],{22298:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var a=i(87462),n=(i(67294),i(3905));i(61839);const o={},l="Interface and API",r={unversionedId:"Effective Objective-C/effective-oc-3",id:"Effective Objective-C/effective-oc-3",title:"Interface and API",description:"15. Use Prefix Names to Avoid Namespace Clashes",source:"@site/docs/language/Effective Objective-C/effective-oc-3.md",sourceDirName:"Effective Objective-C",slug:"/Effective Objective-C/effective-oc-3",permalink:"/docs/language/Effective Objective-C/effective-oc-3",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Objects, Messaging, and the Runtime",permalink:"/docs/language/Effective Objective-C/effective-oc-2"},next:{title:"Protocols and Categories",permalink:"/docs/language/Effective Objective-C/effective-oc-4"}},s={},c=[{value:"15. Use Prefix Names to Avoid Namespace Clashes",id:"15-use-prefix-names-to-avoid-namespace-clashes",level:2},{value:"16: Have a Designated Initializer",id:"16-have-a-designated-initializer",level:2},{value:"17: Implement the description Method",id:"17-implement-the-description-method",level:2},{value:"18. Prefer Immutable Objects",id:"18-prefer-immutable-objects",level:2},{value:"19: Use Clear and Consistent Naming",id:"19-use-clear-and-consistent-naming",level:2},{value:"20: Prefix Private Method Names",id:"20-prefix-private-method-names",level:2},{value:"21. Objective-C Error Model",id:"21-objective-c-error-model",level:2},{value:"22. NSCopying",id:"22-nscopying",level:2}],d={toc:c};function m(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"interface-and-api"},"Interface and API"),(0,n.kt)("h2",{id:"15-use-prefix-names-to-avoid-namespace-clashes"},"15. Use Prefix Names to Avoid Namespace Clashes"),(0,n.kt)("p",null,"\u4e3a\u7c7b\u540d\u6dfb\u52a0\u524d\u7f00\uff0c\u4e0e\u4f60\u7684\u516c\u53f8\u6216\u5e94\u7528\u540d\u76f8\u5173\u3002"),(0,n.kt)("h2",{id:"16-have-a-designated-initializer"},"16: Have a Designated Initializer"),(0,n.kt)("p",null,"\u63d0\u4f9b\u4e00\u4e2a designated initializer\uff0c\u5176\u5b83\u7684\u521d\u59cb\u5316\u65b9\u6cd5\u5747\u5e94\u8c03\u7528\u6b64\u65b9\u6cd5\u3002"),(0,n.kt)("h2",{id:"17-implement-the-description-method"},"17: Implement the description Method"),(0,n.kt)("p",null,"This compact description can be used by forming a dictionary within your own description method and returning a string containing this dictionary\u2019s description method."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-objc"},'- (NSString *)description {\n    return [NSString stringWithFormat:@"<%@: %p, %@>",\n            [self class],\n            self,\n            @{@"title":_title,\n              @"latitude":@(_latitude),\n              @"longitude":@(_longitude)}];\n}\n')),(0,n.kt)("p",null,"Another method to be aware of is ",(0,n.kt)("inlineCode",{parentName:"p"},"debugDescription"),", called when you invoke the ",(0,n.kt)("em",{parentName:"p"},"print-object")," command within the debugger. The default implementation within the NSObject class simply calls directly through to description."),(0,n.kt)("h2",{id:"18-prefer-immutable-objects"},"18. Prefer Immutable Objects"),(0,n.kt)("p",null,"\u7b14\u8005\u5efa\u8bae\u5927\u5bb6\u5c3d\u91cf\u51cf\u5c11\u5bf9\u8c61\u4e2d\u7684\u53ef\u53d8\u5185\u5bb9\u3002\u5728\u7f16\u7a0b\u5b9e\u8df5\u4e2d\uff0c\u5e94\u8be5\u5c3d\u91cf\u628a\u5bf9\u5916\u516c\u5e03\u7684\u5c5e\u6027\u8bbe\u4e3a\u53ea\u8bfb\uff0c\u800c\u4e14\u53ea\u5728\u786e\u6709\u5fc5\u8981\u65f6\u624d\u5bf9\u5916\u516c\u5e03\u5c5e\u6027\u3002\u6709\u4e00\u4e9b\u6570\u636e\u53ef\u80fd\u6e90\u81ea\u7f51\u7edc\u670d\u52a1\uff0c\u5b83\u4e0d\u4f1a\u88ab\u4fee\u6539\uff0c\u5373\u4f7f\u4e34\u65f6\u4fee\u6539\u4e86\u4e5f\u4e0d\u4f1a\u88ab\u63a8\u9001\u5230\u670d\u52a1\u5668\u3002"),(0,n.kt)("p",null,"\u4e0d\u8981\u628a\u53ef\u53d8\u7684 collection \u4f5c\u4e3a\u5c5e\u6027\u516c\u5f00\uff01\u800c\u5e94\u63d0\u4f9b\u76f8\u5173\u7684\u65b9\u6cd5\u3002"),(0,n.kt)("h2",{id:"19-use-clear-and-consistent-naming"},"19: Use Clear and Consistent Naming"),(0,n.kt)("p",null,"Follow the naming that has become standard in Objective-C to create interfaces that fit in and feel right."),(0,n.kt)("p",null,"Ensure that method names are concise but precise, and make their use read left to right just like a sentence."),(0,n.kt)("h2",{id:"20-prefix-private-method-names"},"20: Prefix Private Method Names"),(0,n.kt)("p",null,"When writing a class implementation, it is common to write methods that are used only internally. For such methods, I suggest that you prefix their names with something. This helps with debugging by clearly separating the public methods from the private ones."),(0,n.kt)("h2",{id:"21-objective-c-error-model"},"21. Objective-C Error Model"),(0,n.kt)("p",null,"Use exceptions only for ",(0,n.kt)("strong",{parentName:"p"},"fatal errors")," that should bring down the entire application."),(0,n.kt)("p",null,"For nonfatal errors, either provide a delegate method to handle errors or offer an out-parameter NSError object."),(0,n.kt)("h2",{id:"22-nscopying"},"22. NSCopying"),(0,n.kt)("p",null,"Implement the ",(0,n.kt)("inlineCode",{parentName:"p"},"NSCopying")," protocol if your object will need to be copied."),(0,n.kt)("p",null,"\u6d45\u590d\u5236\uff08\u6d45\u62f7\u8d1d\u3001\u6307\u9488\u62f7\u8d1d\u3001shallow copy\uff09\uff1a\u6ca1\u6709\u4ea7\u751f\u65b0\u5bf9\u8c61\uff0c\u4ecd\u7136\u6307\u5411\u540c\u4e00\u5757\u5185\u5b58\u7a7a\u95f4\u3002"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u6e90\u5bf9\u8c61\u548c\u526f\u672c\u5bf9\u8c61\u662f\u540c\u4e00\u5bf9\u8c61\uff1b"),(0,n.kt)("li",{parentName:"ol"},"\u6e90\u5bf9\u8c61\u5f15\u7528\u8ba1\u6570 +1\uff0c\u76f8\u5f53\u4e8e\u505a\u4e00\u6b21 retain \u64cd\u4f5c\u3002")),(0,n.kt)("p",null,"\u6df1\u590d\u5236\uff08\u6df1\u62f7\u8d1d\u3001\u5185\u5bb9\u62f7\u8d1d\u3001deep copy\uff09\uff1a\u4ea7\u751f\u4e86\u65b0\u5bf9\u8c61\uff0c\u5b58\u653e\u5728\u4e00\u5757\u65b0\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u4e0e\u539f\u6765\u7684\u5bf9\u8c61\u4e92\u4e0d\u5f71\u54cd\u3002"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u6e90\u5bf9\u8c61\u548c\u526f\u672c\u5bf9\u8c61\u662f\u4e0d\u540c\u7684\u4e24\u4e2a\u5bf9\u8c61\uff1b"),(0,n.kt)("li",{parentName:"ol"},"\u6e90\u5bf9\u8c61\u5f15\u7528\u8ba1\u6570\u4e0d\u53d8\uff0c\u526f\u672c\u5bf9\u8c61\u8ba1\u6570\u4e3a 1\uff08\u56e0\u4e3a\u662f\u65b0\u4ea7\u751f\u7684\uff09\u3002"),(0,n.kt)("li",{parentName:"ol"},"\u96c6\u5408\u7684\u6df1\u590d\u5236\u53ea\u590d\u5236\u5bb9\u5668\u672c\u8eab\uff0c\u96c6\u5408\u5185\u7684\u5143\u7d20\u8fd8\u662f\u539f\u6765\u7684\u5143\u7d20\uff08\u6307\u5411\u540c\u4e00\u5757\u5185\u5b58\uff09\u3002")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"img",src:i(47952).Z})),(0,n.kt)("p",null,"\u53ea\u6709\u6e90\u5bf9\u8c61\u548c\u526f\u672c\u5bf9\u8c61\u90fd\u4e0d\u53ef\u53d8\u65f6\uff0c\u624d\u662f\u6d45\u590d\u5236\uff0c\u5176\u4ed6\u90fd\u662f\u6df1\u590d\u5236\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-objc"},'Demo *demo1 = [[Demo alloc]init];\nDemo *demo2 = [[Demo alloc]init];\nNSArray *arr = @[demo1, demo2];\nNSMutableArray *mutableArr = [arr mutableCopy];\nNSLog(@"%p, %p", arr, mutableArr); // \u96c6\u5408\u6df1\u62f7\u8d1d\nNSLog(@"%p, %p", [arr objectAtIndex:0], [mutableArr objectAtIndex:0]); // \u96c6\u5408\u4e2d\u7684\u5bf9\u8c61\u8fd8\u662f\u6307\u5411\u540c\u4e00\u5757\u5185\u5b58\n')))}m.isMDXComponent=!0},47952:(e,t,i)=>{i.d(t,{Z:()=>a});const a="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6NzMyZWE5MGZjYzgxOTNlYTY5MzA4NDYyNzBhMmExNjcyZWFjNThiOTY3ZjEwYTU1OTI5YmQwNGRmNDY4Njg0MApzaXplIDYxNDQxCg=="}}]);