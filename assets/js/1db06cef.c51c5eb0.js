"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8246],{30635:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var i=n(87462),r=(n(67294),n(3905));n(61839);const a={},o="Swift \u91cc\u600e\u4e48\u5199\u4e00\u4e2a\u94fe\u8868",l={unversionedId:"Swift/struct",id:"Swift/struct",title:"Swift \u91cc\u600e\u4e48\u5199\u4e00\u4e2a\u94fe\u8868",description:"\u524d\u6bb5\u65f6\u95f4\u9762\u8bd5 iOS \u5f00\u53d1\u7684\u65f6\u5019\uff0c\u51fa\u4e86\u4e00\u9053\u7b80\u5355\u7684\u4ee3\u7801\u9898\u2014\u2014\u53cd\u8f6c\u94fe\u8868\u3002",source:"@site/docs/language/Swift/struct.md",sourceDirName:"Swift",slug:"/Swift/struct",permalink:"/docs/language/Swift/struct",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u4ee3\u7801",permalink:"/docs/language/Swift/gist-swift"},next:{title:"C",permalink:"/docs/language/"}},s={},p=[],u={toc:p};function d(t){let{components:e,...n}=t;return(0,r.kt)("wrapper",(0,i.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"swift-\u91cc\u600e\u4e48\u5199\u4e00\u4e2a\u94fe\u8868"},"Swift \u91cc\u600e\u4e48\u5199\u4e00\u4e2a\u94fe\u8868"),(0,r.kt)("p",null,"\u524d\u6bb5\u65f6\u95f4\u9762\u8bd5 iOS \u5f00\u53d1\u7684\u65f6\u5019\uff0c\u51fa\u4e86\u4e00\u9053\u7b80\u5355\u7684\u4ee3\u7801\u9898\u2014\u2014\u53cd\u8f6c\u94fe\u8868\u3002"),(0,r.kt)("p",null,"\u672c\u6765\u662f\u5f88\u7b80\u5355\u7684\u4e00\u9053\u9898\uff0c\u6ca1\u60f3\u5230\u4e00\u4e0a\u6765\u5728\u94fe\u8868\u8282\u70b9\u8fd9\u91cc\u5c31\u5361\u4f4f\u4e86\uff0c\u5e73\u65f6\u6211\u4eec\u4e00\u822c\u7528 C++ \u5199\u94fe\u8868\u8282\u70b9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cpp"},"struct ListNode {\n    int val;\n    ListNode *next;\n    ListNode() : val(0), next(nullptr) {}\n};\n")),(0,r.kt)("p",null,"\u770b\u8d77\u6765\u5f88\u81ea\u7136\u5bf9\u5427\uff0c\u7136\u800c\uff0c\u5019\u9009\u4eba\u4f7f\u7528\u4e86 Swift \u91cc\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"struct")," \u6765\u5b9e\u73b0\u94fe\u8868\u8282\u70b9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"struct ListNode {\n    var val: Int = 0;\n    var next: ListNode? = nil;\n};\n")),(0,r.kt)("p",null,"\u4e8e\u662f\u5c31\u4ea7\u751f\u4e86\u7b2c\u4e00\u4e2a\u62a5\u9519\uff1a"),(0,r.kt)("img",{alt:"",src:"/img/0708D16C-A807-4F50-84DA-6DDE9C854342.png"}),(0,r.kt)("p",null,"C++ \u7684 struct \u548c Swift \u7684 struct \u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f\u5176\u5b9e\u6ca1\u4ec0\u4e48\u533a\u522b\uff0c\u4e24\u8005\u90fd\u662f\u503c\u7c7b\u578b\uff0c\u503c\u7c7b\u578b\u610f\u5473\u7740\u5728\u51fd\u6570\u4f20\u53c2\u3001\u8d4b\u503c\u7b49\u60c5\u5f62\u4e2d\uff0c\u7ed3\u6784\u4f53\u91cc\u7684\u6240\u6709\u5143\u7d20\u90fd\u4f1a\u88ab\u62f7\u8d1d\u5e76\u4ea7\u751f\u4e00\u4efd\u65b0\u7684\u6570\u636e\u3002"),(0,r.kt)("p",null,"\u95ee\u9898\u51fa\u5728\u4e86\u6307\u9488\u8fd9\u91cc\u3002Swift \u88ab\u8bbe\u8ba1\u6210\u4e00\u79cd\u5b89\u5168\u7684\u8bed\u8a00\uff0c\u5b83\u4e0d\u80fd\u76f4\u63a5\u64cd\u4f5c\u6307\u9488\u3002\u800c\u7ed3\u6784\u4f53\u7684\u5185\u5b58\u5730\u5740\uff0c\u5c31\u662f\u5b83\u9996\u4e2a\u5143\u7d20\u7684\u5185\u5b58\u5730\u5740\u3002\u56e0\u6b64\uff0c\u8981\u5728\u503c\u7c7b\u578b\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"ListNode")," \u91cc\u9762\u518d\u653e\u4e00\u4e2a\u503c\u7c7b\u578b\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"ListNode")," \u663e\u7136\u4f1a\u9020\u6210\u6570\u636e\u7684\u9012\u5f52\u5d4c\u5957\u3002"),(0,r.kt)("p",null,"\u90a3\u4e48\u5982\u679c\u975e\u8981\u7528\u6307\u9488\u5462\uff1fSwift \u63d0\u4f9b\u4e86",(0,r.kt)("strong",{parentName:"p"},"\u975e\u5b89\u5168"),"\u7684\u65b9\u6cd5\u6765\u95f4\u63a5\u4f7f\u7528\u6307\u9488\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"struct ListNode {\n    var val: Int\n    var next: UnsafePointer<ListNode>?\n\n    init(val: Int) {\n        self.val = val\n        self.next = nil\n    }\n}\n\n// \u521b\u5efa\u94fe\u8868\u8282\u70b9\nvar node1 = ListNode(val: 1)\nvar node2 = ListNode(val: 2)\nvar node3 = ListNode(val: 3)\n\n// \u4f7f\u7528 withUnsafeMutablePointer \u521b\u5efa\u6307\u5411\u8282\u70b9\u7684\u6307\u9488\nlet pointer1 = withUnsafeMutablePointer(to: &node1) { $0 }\nlet pointer2 = withUnsafeMutablePointer(to: &node2) { $0 }\nlet pointer3 = withUnsafeMutablePointer(to: &node3) { $0 }\n\n// \u94fe\u63a5\u8282\u70b9\npointer1.pointee.next = UnsafePointer(pointer2)\npointer2.pointee.next = UnsafePointer(pointer3)\n\n// \u6253\u5370\u94fe\u8868\nvar currentPointer: UnsafeMutablePointer<ListNode>? = pointer1\nwhile let current = currentPointer {\n    print(current.pointee.val)\n    currentPointer = UnsafeMutablePointer(mutating: current.pointee.next)\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"withUnsafePointer"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"withUnsafeMutablePointer"),"\u7684\u7528\u6cd5\u7c7b\u4f3c\uff0c\u5b83\u5141\u8bb8\u4f60\u5728\u4e00\u4e2a\u95ed\u5305\u4e2d\u8bbf\u95ee\u4e00\u4e2a\u5bf9\u8c61\u7684\u6307\u9488\uff0c\u4f8b\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-swift"},'var number: Int = 42\n\nwithUnsafePointer(&number) { pointer in\n    // \u5728\u8fd9\u4e2a\u95ed\u5305\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 pointer \u6765\u8bbf\u95ee number \u7684\u5185\u5b58\u5730\u5740\n    print("The address of number is: \\(pointer)")\n    print("The value at that address is: \\(pointer.pointee)")\n}\n')),(0,r.kt)("p",null,"\u5728\u5b98\u65b9\u6587\u6863\u4e2d\u63d0\u5230\u8be5\u51fd\u6570\u7684\u6ce8\u610f\u4e8b\u9879\uff1a"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The pointer argument to body is valid only during the execution of ",(0,r.kt)("inlineCode",{parentName:"p"},"withUnsafeMutablePointer(to:_:)"),". Do not store or return the pointer for later use.")),(0,r.kt)("p",null,"\u663e\u7136\u5b98\u65b9\u5e76\u4e0d\u5efa\u8bae\u6211\u4eec\u628a\u6307\u9488\u62ff\u5230\u95ed\u5305\u5916\u53bb\u4f7f\u7528\uff0c\u8fd9\u4f1a\u7834\u574f Swift \u6240\u63d0\u5021\u7684\u5b89\u5168\u6027\u3002"),(0,r.kt)("p",null,"\u65e2\u7136 struct + \u6307\u9488\u7684\u5199\u6cd5\u4e0d\u5b89\u5168\uff0c\u6709\u6ca1\u6709\u522b\u7684\u65b9\u5f0f\u5462\uff1f\u5176\u5b9e Swift \u7684\u679a\u4e3e\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u94fe\u8868\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-swift"},"indirect enum ListNode<T> {\n    case empty\n    case node(value: T, next: ListNode<T>)\n}\n")),(0,r.kt)("p",null,"C/C++ \u7684\u679a\u4e3e\u4ec5\u4ec5\u662f\u4e00\u4e2a\u547d\u540d\u7684\u6574\u6570\u96c6\u5408\uff0c\u4e0d\u80fd\u5b58\u50a8\u989d\u5916\u7684\u6570\u636e\u3002\u800c Swift \u7684\u679a\u4e3e\u53ef\u4ee5\u5b58\u50a8\u5173\u8054\u503c\uff0c\u751a\u81f3\u53ef\u4ee5\u5b9a\u4e49\u65b9\u6cd5\u548c\u8ba1\u7b97\u5c5e\u6027\uff0c\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\u53ef\u4ee5\u66ff\u4ee3\u7c7b\u548c\u7ed3\u6784\u4f53\u3002\u53e6\u5916\uff0cSwift \u7684",(0,r.kt)("strong",{parentName:"p"},"\u9012\u5f52\u679a\u4e3e"),"\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u679a\u4e3e\uff0c\u5b83\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u679a\u4e3e\u6210\u5458\u4f7f\u7528\u8be5\u679a\u4e3e\u7c7b\u578b\u7684\u5b9e\u4f8b\u4f5c\u4e3a\u5173\u8054\u503c\u3002\u4f60\u53ef\u4ee5\u5728\u679a\u4e3e\u6210\u5458\u524d\u52a0\u4e0a ",(0,r.kt)("inlineCode",{parentName:"p"},"indirect")," \u6765\u8868\u793a\u8be5\u6210\u5458\u53ef\u9012\u5f52\uff0c\u4e5f\u53ef\u4ee5\u5728\u679a\u4e3e\u7c7b\u578b\u5f00\u5934\u52a0\u4e0a ",(0,r.kt)("inlineCode",{parentName:"p"},"indirect")," \u5173\u952e\u5b57\u6765\u8868\u660e\u5b83\u7684\u6240\u6709\u6210\u5458\u90fd\u662f\u53ef\u9012\u5f52\u7684\u3002"),(0,r.kt)("p",null,"\u8fd9\u79cd\u5199\u6cd5\u6709\u70b9\u8ba8\u5de7\uff0c\u5229\u7528\u4e86 Swift \u4e2d\u6bd4\u8f83\u9ad8\u9636\u7684\u8bed\u6cd5\u7279\u6027\u3002\u603b\u4e4b\uff0c\u7b14\u8005\u89c9\u5f97\u4f7f\u7528\u679a\u4e3e\u6765\u5b9e\u73b0\u94fe\u8868\u8fd8\u662f\u7a0d\u5fae\u6709\u70b9\u7ed5\u7684\uff0c\u6700\u5e38\u89c4\u7684\u5199\u6cd5\u8fd8\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"class ListNode"),"\u3002"))}d.isMDXComponent=!0}}]);