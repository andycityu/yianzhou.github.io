"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[395],{94710:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var i=n(87462),a=(n(67294),n(3905));n(61839);const o={},r="UIKit",l={unversionedId:"Frameworks/UIKit",id:"Frameworks/UIKit",title:"UIKit",description:"UIResponder \u53ca\u5176\u6240\u6709\u5b50\u7c7b\uff0c\u4ee5\u53ca\u4efb\u4f55\u64cd\u7eb5\u7528\u6237\u754c\u9762\u7684\u884c\u4e3a\uff0c\u90fd\u8981\u5728\u4e3b\u7ebf\u7a0b\u8fdb\u884c\uff0c\u89c1 Apple Developer Documentation\u3002",source:"@site/docs/apple/Frameworks/UIKit.md",sourceDirName:"Frameworks",slug:"/Frameworks/UIKit",permalink:"/docs/apple/Frameworks/UIKit",draft:!1,editUrl:"https://github.com/yianzhou/yianzhou.github.io/docs/apple/Frameworks/UIKit.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"SDWebImage",permalink:"/docs/apple/Frameworks/SDWebImage"},next:{title:"App Extension",permalink:"/docs/apple/Frameworks/app-extension"}},s={},p=[{value:"iPhone X Screen",id:"iphone-x-screen",level:2},{value:"Render Loop",id:"render-loop",level:2},{value:"Auto Layout",id:"auto-layout",level:2},{value:"\u6297\u62c9\u4f38\u3001\u6297\u538b\u7f29",id:"\u6297\u62c9\u4f38\u6297\u538b\u7f29",level:2},{value:"contentMode",id:"contentmode",level:2},{value:"hitTest",id:"hittest",level:2},{value:"clipsToBounds",id:"clipstobounds",level:2},{value:"frame and bounds",id:"frame-and-bounds",level:2},{value:"autoresizingMask",id:"autoresizingmask",level:2},{value:"\u6a2a\u5c4f",id:"\u6a2a\u5c4f",level:2},{value:"\u72b6\u6001\u680f\u989c\u8272",id:"\u72b6\u6001\u680f\u989c\u8272",level:2},{value:"UIViewController",id:"uiviewcontroller",level:2},{value:"UIApplication",id:"uiapplication",level:2},{value:"UIGestureRecognizer",id:"uigesturerecognizer",level:2},{value:"\u622a\u56fe",id:"\u622a\u56fe",level:2},{value:"UIPasteboard",id:"uipasteboard",level:2}],d={toc:p};function u(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,i.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"uikit"},"UIKit"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"UIResponder")," \u53ca\u5176\u6240\u6709\u5b50\u7c7b\uff0c\u4ee5\u53ca\u4efb\u4f55\u64cd\u7eb5\u7528\u6237\u754c\u9762\u7684\u884c\u4e3a\uff0c\u90fd\u8981\u5728\u4e3b\u7ebf\u7a0b\u8fdb\u884c\uff0c\u89c1 ",(0,a.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/uikit"},"Apple Developer Documentation"),"\u3002"),(0,a.kt)("h2",{id:"iphone-x-screen"},"iPhone X Screen"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://ivomynttinen.com/blog/ios-design-guidelines"},"The iOS Design Guidelines - Ivo Mynttinen / User Interface Designer")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"img",src:n(79503).Z,width:"1624",height:"1764"})),(0,a.kt)("h2",{id:"render-loop"},"Render Loop"),(0,a.kt)("p",null,"The Render Loop is the process that runs potentially at 120 times every second. That makes sure that all the content is ready to go for each frame."),(0,a.kt)("p",null,"First every view that needs it will receive ",(0,a.kt)("inlineCode",{parentName:"p"},"updateConstraints()"),". And that runs from the leaf most views up to the view hierarchy towards the window. Next, every view receives ",(0,a.kt)("inlineCode",{parentName:"p"},"layoutSubViews()"),". This runs the opposite direction starting from the window going down towards the leaves. Last, every view gets ",(0,a.kt)("inlineCode",{parentName:"p"},"draw(_:)")," if it needs it also from the window towards the leaves."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"img",src:n(9685).Z,width:"2204",height:"1086"})),(0,a.kt)("p",null,"The Render Loop consists of three phases -- Update Constraints, Layout, and Display. They all have the exact same purpose and they have exact parallel sets of methods."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Update Constraints"),(0,a.kt)("th",{parentName:"tr",align:null},"Layout"),(0,a.kt)("th",{parentName:"tr",align:null},"Display"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"updateConstraints()"),(0,a.kt)("td",{parentName:"tr",align:null},"layoutSubViews()"),(0,a.kt)("td",{parentName:"tr",align:null},"draw(","_",":)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"setNeedsUpdateConstraints()"),(0,a.kt)("td",{parentName:"tr",align:null},"setNeedsLayout()"),(0,a.kt)("td",{parentName:"tr",align:null},"setNeedsDisplay()")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"updateConstraintsIfNeeded()"),(0,a.kt)("td",{parentName:"tr",align:null},"layoutIfNeeded()"),(0,a.kt)("td",{parentName:"tr",align:null})))),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"setNeedsLayout")," \u662f\u5f02\u6b65\u7684\uff0c\u4e0d\u8981\u76f4\u63a5\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"layoutSubviews"),"\uff0c\u6211\u4eec\u81ea\u5b9a\u4e49\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"UIView")," \u53ef\u4ee5\u91cd\u8f7d ",(0,a.kt)("inlineCode",{parentName:"p"},"layoutSubviews"),"\uff0c\u7528\u4e8e\u8c03\u6574\u5b50\u89c6\u56fe\u7684 frame\u3002"),(0,a.kt)("p",null,"You should not call ",(0,a.kt)("inlineCode",{parentName:"p"},"layoutSubviews")," directly. If you want to force a layout update, call the ",(0,a.kt)("inlineCode",{parentName:"p"},"setNeedsLayout")," method instead to do so. This method makes a note of the request and returns immediately. Because this method does not force an immediate update, but instead waits for the next update cycle, you can use it to invalidate the layout of multiple views before any of those views are updated. This behavior allows you to consolidate all of your layout updates to one update cycle, which is usually better for performance."),(0,a.kt)("p",null,"If you want to update the layout of your views immediately, call the ",(0,a.kt)("inlineCode",{parentName:"p"},"layoutIfNeeded()")," method. If no layout updates are pending, this method exits without modifying the layout or calling any layout-related callbacks."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"setNeedsDisplay")," \u662f\u5f02\u6b65\u7684\uff0c\u4e0d\u8981\u76f4\u63a5\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"drawRect:"),"\uff0c\u6211\u4eec\u81ea\u5b9a\u4e49\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"UIView")," \u53ef\u4ee5\u91cd\u8f7d ",(0,a.kt)("inlineCode",{parentName:"p"},"drawRect:"),"\uff0c\u7528\u4e8e\u7ed8\u5236\u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"drawRect:")," Subclasses that use technologies such as Core Graphics and UIKit to draw their view\u2019s content should override this method and implement their drawing code there. UIKit creates and configures a graphics context for drawing and adjusts the transform of that context so that its origin matches the origin of your view\u2019s bounds rectangle. You can get a reference to the graphics context using the ",(0,a.kt)("inlineCode",{parentName:"p"},"UIGraphicsGetCurrentContext")," function, but do not establish a strong reference to the graphics context because it can change between calls to the ",(0,a.kt)("inlineCode",{parentName:"p"},"drawRect:")," method."),(0,a.kt)("h2",{id:"auto-layout"},"Auto Layout"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://developer.apple.com/videos/play/wwdc2018/220/"},"WWDC 2018 - High Performance Auto Layout")),(0,a.kt)("p",null,"iOS \u5e03\u5c40\u53d1\u5c55\uff1aFrame -> AutoLayout (iOS 6, Apple VSL, Masonry, SnapKit) -> UIStackView (iOS 9, \u6a21\u4eff\u524d\u7aef Flexbox \u5e03\u5c40\u601d\u8def) -> SwiftUI (iOS 13)"),(0,a.kt)("p",null,"1997 \u5e74 Auto Layout \u7528\u5230\u7684\u5e03\u5c40\u7b97\u6cd5 Cassowary \u88ab\u53d1\u660e\u4e86\u51fa\u6765\uff0c\u5b83\u80fd\u591f\u6709\u6548\u89e3\u6790\u7ebf\u6027\u7b49\u5f0f\u7cfb\u7edf\u548c\u7ebf\u6027\u4e0d\u7b49\u5f0f\u7cfb\u7edf\uff0c\u7528\u6765\u8868\u793a\u7528\u6237\u754c\u9762\u4e2d\u90a3\u4e9b\u76f8\u7b49\u5173\u7cfb\u548c\u4e0d\u7b49\u5173\u7cfb\u3002"),(0,a.kt)("p",null,"\u4f7f\u7528 Auto Layout \u548c\u624b\u5199\u5e03\u5c40\u7684\u533a\u522b\uff0c\u5c31\u662f\u591a\u4e86\u81ea\u52a8\u5e03\u5c40\u5f15\u64ce\uff08\u7edf\u4e00\u7ba1\u7406\u5e03\u5c40\u7684\u521b\u5efa\u3001\u66f4\u65b0\u548c\u9500\u6bc1\uff09\uff0c\u4ee5\u53ca\u7ea6\u675f\u7684\u8ba1\u7b97\u3002"),(0,a.kt)("p",null,"iOS 12 \u7684 Auto Layout \u66f4\u591a\u5730\u5229\u7528\u4e86 Cassowary \u7b97\u6cd5\u7684\u754c\u9762\u66f4\u65b0\u7b56\u7565\uff0c\u4f7f\u5176\u771f\u6b63\u5b8c\u6210\u4e86\u9ad8\u6548\u7684\u754c\u9762\u7ebf\u6027\u7b56\u7565\u8ba1\u7b97\u3002\u53ef\u4ee5\u653e\u5fc3\u4f7f\u7528\u4e86\u3002"),(0,a.kt)("p",null,"Auto Layout \u4e0e Frame \u7684\u533a\u522b\u662f\u591a\u4e86\u5e03\u5c40\u5f15\u64ce\u3002\u5f53\u7ea6\u675f\u53d1\u751f\u53d8\u5316\u540e\u65f6\uff0c\u4f1a\u89e6\u53d1 Deffered Layout Pass\uff08\u5ef6\u8fdf\u5e03\u5c40\u4f20\u9012\uff09\uff0c\u5e76\u505a\u5bb9\u9519\u5904\u7406\uff08\u7ea6\u675f\u4e22\u5931\u3001\u51b2\u7a81\u7b49\u60c5\u51b5\uff09\uff0c\u5e76\u628a view \u6807\u8bb0\u4e3a dirty\u3002\u5f53\u4e0b\u4e00\u6b21\u5237\u65b0\u5c4f\u5e55\u52a8\u4f5c\u6765\u4e34\uff08\u6216\u8005\u662f\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"layoutIfNeeded"),"\uff09\u65f6\uff0c\u5f15\u64ce\u4f1a\u4ece\u9876\u5411\u4e0b\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"layoutSubviews"),"\uff0c\u901a\u8fc7 Cassowary \u7b97\u6cd5\u8ba1\u7b97\u5404\u4e2a\u5b50\u89c6\u56fe\u7684\u4f4d\u7f6e\uff0c\u5f97\u5230 frames\uff0c\u63a5\u4e0b\u6765\u7684\u8fc7\u7a0b\u5c31\u8ddf\u624b\u5199 frame \u662f\u4e00\u6837\u7684\u4e86\u3002"),(0,a.kt)("h2",{id:"\u6297\u62c9\u4f38\u6297\u538b\u7f29"},"\u6297\u62c9\u4f38\u3001\u6297\u538b\u7f29"),(0,a.kt)("p",null,"Content Hugging Priority: \u503c\u8d8a\u5927\uff0c\u8d8a\u4e0d\u5bb9\u6613\u88ab\u62c9\u4f38"),(0,a.kt)("p",null,"Content Compression Resistance Priority: \u503c\u8d8a\u5927\uff0c\u8d8a\u4e0d\u5bb9\u6613\u88ab\u538b\u7f29"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"|UIImageView|UILabel|UILabel|\n")),(0,a.kt)("p",null,"\u4e24\u4e2a Label \u90fd\u662f\u6839\u636e\u5185\u5bb9\u81ea\u9002\u5e94\u52a8\u6001\u5bbd\u5ea6\uff1b"),(0,a.kt)("p",null,"\u5f53\u4e24\u4e2a Label \u7684\u957f\u5ea6\u52a0\u8d77\u6765\u4e0d\u8db3\u5c4f\u5e55\u5bbd\u5ea6\u65f6\uff0cAuto Layout \u4e0d\u77e5\u9053\u4f18\u5148\u62c9\u4f38\u54ea\u4e00\u4e2a\uff0c\u6b64\u65f6 Content Hugging Priority \u8d77\u4f5c\u7528\uff1b"),(0,a.kt)("p",null,"\u5f53\u4e24\u4e2a Label \u7684\u957f\u5ea6\u52a0\u8d77\u6765\u8d85\u8fc7\u4e86\u5c4f\u5e55\u5bbd\u5ea6\u65f6\uff0cAuto Layout \u4e0d\u77e5\u9053\u5148\u538b\u7f29\u54ea\u4e2a\uff0c\u6b64\u65f6 Content Compression Resistance Priority \u8d77\u4f5c\u7528\u3002"),(0,a.kt)("h2",{id:"contentmode"},(0,a.kt)("a",{parentName:"h2",href:"https://developer.apple.com/documentation/uikit/uiview/contentmode"},"contentMode")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(54954).Z,width:"1664",height:"1624"})),(0,a.kt)("h2",{id:"hittest"},(0,a.kt)("a",{parentName:"h2",href:"https://developer.apple.com/documentation/uikit/uiview/1622469-hittest"},"hitTest")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView?")),(0,a.kt)("p",null,"Returns the farthest descendant of the receiver in the view hierarchy (including itself) that contains a specified point."),(0,a.kt)("p",null,"This method traverses the view hierarchy by calling the ",(0,a.kt)("inlineCode",{parentName:"p"},"point(inside:with:)")," method of each subview to determine which subview should receive a touch event. If ",(0,a.kt)("inlineCode",{parentName:"p"},"point(inside:with:)")," returns true, then the subview\u2019s hierarchy is similarly traversed until the frontmost view containing the specified point is found."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"func point(inside point: CGPoint, with event: UIEvent?) -> Bool")),(0,a.kt)("p",null,"Returns a Boolean value indicating whether the receiver contains the specified point."),(0,a.kt)("h2",{id:"clipstobounds"},"clipsToBounds"),(0,a.kt)("p",null,"By default, when a subview\u2019s visible area extends outside of the bounds of its superview, no clipping of the subview's content occurs. Use the ",(0,a.kt)("inlineCode",{parentName:"p"},"clipsToBounds")," property to change that behavior."),(0,a.kt)("h2",{id:"frame-and-bounds"},"frame and bounds"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"frame"),": The frame rectangle, which describes the view\u2019s location and size in its superview\u2019s coordinate system."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"bounds"),": The bounds rectangle, which describes the view\u2019s location and size in its own coordinate system."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"UIView")," \u81ea\u5df1\u7684\u5750\u6807\u7cfb\u7684",(0,a.kt)("strong",{parentName:"p"},"\u539f\u70b9"),"\uff0c\u5c31\u662f\u5b83\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"frame")," \u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"origin")),(0,a.kt)("h2",{id:"autoresizingmask"},"autoresizingMask"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"autoresizingMask")," is an integer bit mask that determines how the receiver resizes itself when its superview\u2019s bounds change."),(0,a.kt)("p",null,"When a view\u2019s bounds change, that view automatically resizes its subviews according to each subview\u2019s autoresizing mask. You specify the value of this mask by combining the constants described in UIView.AutoresizingMask using the C bitwise OR operator. Combining these constants lets you specify which dimensions of the view should grow or shrink relative to the superview. The default value of this property is none, which indicates that the view should not be resized at all."),(0,a.kt)("p",null,"When more than one option along the same axis is set, the default behavior is to distribute the size difference proportionally among the flexible portions. The larger the flexible portion, relative to the other flexible portions, the more it is likely to grow. For example, suppose this property includes the flexibleWidth and flexibleRightMargin constants but does not include the flexibleLeftMargin constant, thus indicating that the width of the view\u2019s left margin is fixed but that the view\u2019s width and right margin may change. Thus, the view appears anchored to the left side of its superview while both the view width and the gap to the right of the view increase."),(0,a.kt)("p",null,"If the autoresizing behaviors do not offer the precise layout that you need for your views, you can use a custom container view and override its layoutSubviews() method to position your subviews more precisely."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"translatesAutoresizingMaskIntoConstraints")," is a Boolean value that determines whether the view\u2019s autoresizing mask is translated into Auto Layout constraints."),(0,a.kt)("p",null,"If this property\u2019s value is true, the system creates a set of constraints that duplicate the behavior specified by the view\u2019s autoresizing mask. This also lets you modify the view\u2019s size and location using the view\u2019s frame, bounds, or center properties, allowing you to create a static, frame-based layout within Auto Layout."),(0,a.kt)("p",null,"Note that the autoresizing mask constraints fully specify the view\u2019s size and position; therefore, you cannot add additional constraints to modify this size or position without introducing conflicts. If you want to use Auto Layout to dynamically calculate the size and position of your view, you must set this property to false, and then provide a non ambiguous, nonconflicting set of constraints for the view."),(0,a.kt)("p",null,"By default, the property is set to true for any view you programmatically create. If you add views in Interface Builder, the system automatically sets this property to false."),(0,a.kt)("h2",{id:"\u6a2a\u5c4f"},"\u6a2a\u5c4f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"UIViewController"),":"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"- (BOOL)shouldAutorotate {}")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"- (UIInterfaceOrientationMask)supportedInterfaceOrientations {}")),(0,a.kt)("p",null,"When the device orientation changes, ",(0,a.kt)("strong",{parentName:"p"},"the system calls this method on the root view controller or the topmost modal view controller that fills the window"),". If the view controller supports the new orientation, the system rotates the window and the view controller. The system only calls this method if the view controller's ",(0,a.kt)("inlineCode",{parentName:"p"},"shouldAutorotate")," method returns ",(0,a.kt)("inlineCode",{parentName:"p"},"YES"),"."),(0,a.kt)("p",null,"To determine whether to rotate, the system compares the ",(0,a.kt)("strong",{parentName:"p"},"view controller's supported orientations")," with the ",(0,a.kt)("strong",{parentName:"p"},"app's supported orientations")," \u2014 as determined by the Info.plist file or the app delegate's ",(0,a.kt)("inlineCode",{parentName:"p"},"application:supportedInterfaceOrientationsForWindow:")," method \u2014 and the ",(0,a.kt)("strong",{parentName:"p"},"device's supported orientations"),".\uff08iOS devices without a Home button, such as iPhone 12, don\u2019t support ",(0,a.kt)("inlineCode",{parentName:"p"},"UIInterfaceOrientationMaskPortraitUpsideDown")," orientation)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"#pragma mark - \u7981\u6b62\u6a2a\u5c4f\n\n- (BOOL)shouldAutorotate {\n    return NO;\n}\n\n- (UIInterfaceOrientationMask)supportedInterfaceOrientations {\n    return UIInterfaceOrientationMaskPortrait;\n}\n")),(0,a.kt)("h2",{id:"\u72b6\u6001\u680f\u989c\u8272"},"\u72b6\u6001\u680f\u989c\u8272"),(0,a.kt)("p",null,"\u72b6\u6001\u680f\u7684\u989c\u8272\u7531 ",(0,a.kt)("inlineCode",{parentName:"p"},"UIViewController")," \u51b3\u5b9a\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"AppDelegate")," \u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"rootViewController")," \u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"preferredStatusBarStyle")," \u65b9\u6cd5\u51b3\u5b9a\u72b6\u6001\u680f\u989c\u8272\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"- (UIStatusBarStyle)preferredStatusBarStyle {}")," \u901a\u5e38\u7528\u8fd9\u4e2a\u65b9\u6cd5\u8fd4\u56de\u72b6\u6001\u680f\u989c\u8272\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"- (UIViewController *)childViewControllerForStatusBarStyle {}")," \u901a\u5e38\u7528\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"UINavigationController")," \u7684\u573a\u666f\uff0c\u544a\u8bc9 UIKit \u6211\u5e0c\u671b\u7528\u54ea\u4e2a ",(0,a.kt)("inlineCode",{parentName:"p"},"UIViewController")," \u8fd4\u56de\u7684\u72b6\u6001\u680f\u989c\u8272\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"setNeedsStatusBarAppearanceUpdate")," Call this method if the view controller's status bar attributes, such as hidden/unhidden status or style, change. If you call this method within an animation block, the changes are animated along with the rest of the animation block."),(0,a.kt)("h2",{id:"uiviewcontroller"},"UIViewController"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"img",src:n(31337).Z,width:"690",height:"630"})),(0,a.kt)("p",null,"\u6dfb\u52a0\u5b50 VC\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-objc"},"// \u6765\u81ea UIKit \u7684\u63a5\u53e3\u6ce8\u91ca\uff1a\n// addChildViewController: will call [child willMoveToParentViewController:self] before adding the child.\n// However, it will not call didMoveToParentViewController:.\n[self addChildViewController:self.flutterVC];\n[self.view addSubview:self.flutterVC.view];\n[self.flutterVC didMoveToParentViewController:self];\n")),(0,a.kt)("p",null,"\u79fb\u9664\u5b50 VC\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-objc"},"// \u6765\u81ea UIKit \u7684\u63a5\u53e3\u6ce8\u91ca\uff1a\n// Similarly, removeFromParentViewController does not call [self willMoveToParentViewController:nil] before removing the child.\n[self.flutterVC willMoveToParentViewController:nil];\n[self.flutterVC.view removeFromSuperview];\n[self.flutterVC removeFromParentViewController];\nself.flutterVC = nil;\n")),(0,a.kt)("p",null,"\u6dfb\u52a0\u5b50 VC \u540e\uff0c\u7236 VC \u7684\u4e8b\u4ef6\u4f1a\u5411\u5b50 VC \u4f20\u9012\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u751f\u547d\u5468\u671f\u4e8b\u4ef6\uff1a",(0,a.kt)("inlineCode",{parentName:"li"},"viewWillAppear"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"viewDidAppear"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"viewWillDisappear"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"viewDidDisappear")),(0,a.kt)("li",{parentName:"ul"},"\u65cb\u8f6c\u4e8b\u4ef6\uff1a",(0,a.kt)("inlineCode",{parentName:"li"},"willRotateToInterfaceOrientation:duration:"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"willAnimateRotationToInterfaceOrientation:duration:"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"didRotateFromInterfaceOrientation:"))),(0,a.kt)("h2",{id:"uiapplication"},"UIApplication"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/uikit/uiapplication/1623097-ignoresnapshotonnextapplicationl?language=objc"},"ignoreSnapshotOnNextApplicationLaunch")),(0,a.kt)("p",null,"Swipe up from the bottom to the middle of your screen and hold until you see the App Switcher."),(0,a.kt)("p",null,"\u8fdb\u5165 App Switcher \u65f6\u4e0d\u4f1a\u89e6\u53d1 ",(0,a.kt)("inlineCode",{parentName:"p"},"applicationDidEnterBackground"),"\uff0c\u8981\u56de\u5230\u4e3b\u5c4f\u5e55\u65f6\u624d\u4f1a\u89e6\u53d1\u3002"),(0,a.kt)("p",null,"\u8fdb\u5165 App Switcher \u540e\u9000\u51fa App\uff08iOS 13+\uff09\uff1a\uff08\u6ce8\u610f\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"applicationDidEnterBackground")," \u6ca1\u6709\u8c03\u7528\u7684\uff09"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Demo[9565:1006064] -[SceneDelegate sceneWillResignActive:]\nDemo[9565:1006064] -[SceneDelegate sceneDidDisconnect:]\nDemo[9565:1006064] -[AppDelegate applicationWillTerminate:]\n")),(0,a.kt)("p",null,"\u8fdb\u5165 App Switcher \u540e\u9000\u51fa App\uff08iOS 12\uff09\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Demo[9598:1013427] -[AppDelegate applicationDidEnterBackground:]\nDemo[9598:1013427] -[AppDelegate applicationWillTerminate:]\n")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"img",src:n(50809).Z,width:"1466",height:"1062"})),(0,a.kt)("h2",{id:"uigesturerecognizer"},"UIGestureRecognizer"),(0,a.kt)("p",null,"UIGestureRecognizer \u6709\u4e2a\u65b9\u6cd5\u53eb\u505a requireGestureRecognizerToFail\uff0c\u4ed6\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e00\u4e2a recognizer\uff0c\u5373\u4fbf\u81ea\u5df1\u5df2\u7ecf\u6ee1\u8db3\u6761\u4ef6\u4e86\uff0c\u4e5f\u4e0d\u4f1a\u7acb\u523b\u89e6\u53d1\uff0c\u4f1a\u7b49\u5230\u8be5\u6307\u5b9a\u7684 recognizer \u786e\u5b9a\u5931\u8d25\u4e4b\u540e\u624d\u89e6\u53d1\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c"},"// \u4f18\u5148\u54cd\u5e94\u5c4f\u5e55\u53f3\u6ed1\u8fd4\u56de\nfor (UIGestureRecognizer *gestRecognizer in self.navigationController.view.gestureRecognizers) {\n    if ([gestRecognizer isKindOfClass:[UIScreenEdgePanGestureRecognizer class]]) {\n        [\u81ea\u5b9a\u4e49\u624b\u52bf requireGestureRecognizerToFail:gestRecognizer]; // \u6211\u4eec\u81ea\u5df1\u6dfb\u52a0\u7684\u624b\u52bf\uff0c\u9700\u8981\u62a0\u8fb9\u8fd4\u56de\u624b\u52bf\u786e\u8ba4\u5931\u8d25\u518d\u89e6\u53d1\n    }\n}\n")),(0,a.kt)("h2",{id:"\u622a\u56fe"},"\u622a\u56fe"),(0,a.kt)("p",null,"\u4ec5\u7f51\u9875\u573a\u666f\u9700\u8981\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"renderLayerInContext")," \u8fdb\u884c\u91cd\u7ed8\uff0c\u5176\u5b83\u7684\u7f29\u7565\u56fe\u7edf\u4e00\u90fd\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"drawViewHierarchyInRect"),"\uff08\u5feb\uff09\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-objc"},"- (UIImage *)thumbnail {\n    if (!_thumbnail) {\n        UIGraphicsImageRendererFormat *format = [[UIGraphicsImageRendererFormat alloc] init];\n        format.scale = 1; // \u63a7\u5236\u5185\u5b58\u6d88\u8017\n        UIGraphicsImageRenderer *renderer = [[UIGraphicsImageRenderer alloc] initWithSize:self.bounds.size format:format];\n        _thumbnail = [renderer imageWithActions:^(UIGraphicsImageRendererContext *_Nonnull rendererContext) {\n            [self drawViewHierarchyInRect:self.bounds afterScreenUpdates:NO];\n        }];\n    }\n    return _thumbnail;\n}\n\n- (UIImage *)thumbnail {\n    if (!_thumbnail) {\n        UIGraphicsImageRendererFormat *format = [[UIGraphicsImageRendererFormat alloc] init];\n        format.scale = 1; // \u63a7\u5236\u5185\u5b58\u6d88\u8017\n        UIGraphicsImageRenderer *renderer = [[UIGraphicsImageRenderer alloc] initWithSize:self.bounds.size format:format];\n        _thumbnail = [renderer imageWithActions:^(UIGraphicsImageRendererContext *_Nonnull rendererContext) {\n            @try {\n                [self.layer renderInContext:rendererContext.CGContext];\n            } @catch (NSException *exception) {\n            }\n        }];\n    }\n    return _thumbnail;\n}\n")),(0,a.kt)("h2",{id:"uipasteboard"},"UIPasteboard"),(0,a.kt)("p",null,"For sharing data with any other app, use the systemwide ",(0,a.kt)("strong",{parentName:"p"},"general pasteboard"),"."),(0,a.kt)("p",null,"For sharing data with another app from your team\u2014that has the same team ID as the app to share from\u2014use ",(0,a.kt)("strong",{parentName:"p"},"named pasteboards"),"."))}u.isMDXComponent=!0},31337:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/8376D74D-9BC0-42C7-92E6-CF0608A85CF8-2e1e980234c2f49ca15cb6d1800e2ff7.png"},9685:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/936C2B28-091F-46AB-8A45-2B12F004E739-d8322cd320c57552ebf9dedc67de1ab0.png"},54954:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/iPhone\u5c4f\u5e55\u9002\u914d-028377e0e09a597b486746ade1a36bb7.png"},50809:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/7C67368A-1D86-41E0-9D24-B4D210340990-9d6ca9e0db65c9fd25b6c371470f64ce.png"},79503:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/9FDB6B08-1A6B-459A-9AA4-FD62B9973BA3-c0425e3aee3f6570383f80a0ee46c441.png"}}]);