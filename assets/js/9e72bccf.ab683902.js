"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3294],{33625:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>p,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));n(61839);const s={},o="HTTP",p={unversionedId:"http",id:"http",title:"HTTP",description:"\u8303\u56f4\u8bf7\u6c42",source:"@site/docs/apple/http.md",sourceDirName:".",slug:"/http",permalink:"/docs/apple/http",draft:!1,editUrl:"https://github.com/yianzhou/yianzhou.github.io/docs/apple/http.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u56fe\u5f62\u6e32\u67d3",permalink:"/docs/apple/graphics"},next:{title:"\u5361\u987f",permalink:"/docs/apple/lag"}},i={},l=[{value:"\u8303\u56f4\u8bf7\u6c42",id:"\u8303\u56f4\u8bf7\u6c42",level:2}],u={toc:l};function h(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"http"},"HTTP"),(0,r.kt)("h2",{id:"\u8303\u56f4\u8bf7\u6c42"},"\u8303\u56f4\u8bf7\u6c42"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests"},"HTTP range requests - HTTP | MDN")),(0,r.kt)("p",null,"An HTTP ",(0,r.kt)("strong",{parentName:"p"},"range request")," asks the server to send only a portion of an HTTP message back to a client."),(0,r.kt)("p",null,"Range requests are useful for download managers that let the user pause and resume the download."),(0,r.kt)("p",null,"\u5224\u65ad\u670d\u52a1\u5668\u662f\u5426\u652f\u6301\uff1aIf an HTTP ",(0,r.kt)("strong",{parentName:"p"},"response")," includes the ",(0,r.kt)("inlineCode",{parentName:"p"},"Accept-Ranges")," header and its value is anything other than ",(0,r.kt)("inlineCode",{parentName:"p"},"none"),", then the server supports range requests."),(0,r.kt)("p",null,"\u6ca1\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"Accept-Ranges")," \u5b57\u6bb5\u6216\u8005 ",(0,r.kt)("inlineCode",{parentName:"p"},"Accept-Ranges")," \u5b57\u6bb5\u503c\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"none"),"\uff0c\u5747\u4e0d\u652f\u6301\u3002",(0,r.kt)("strong",{parentName:"p"},"A download manager might disable its pause button in that case.")),(0,r.kt)("p",null,"You can perform a manual check by issuing a ",(0,r.kt)("strong",{parentName:"p"},"HEAD request")," with a tool like cURL."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl -I http://i.imgur.com/z4d4kWk.jpg\n\ncurl -I https://www.youtube.com/watch?v=EwTZ2xpQwpA\n")),(0,r.kt)("p",null,"If the server supports range requests, then by including the ",(0,r.kt)("inlineCode",{parentName:"p"},"Range")," header in your HTTP request, you can specify which part or parts of the document you want the server to return."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'curl https://i.imgur.com/z4d4kWk.jpg -i -H "Range: bytes=0-1023"\n\nHTTP/2 206\nlast-modified: Thu, 02 Feb 2017 11:15:53 GMT\netag: "18c50e1bbe972bdf9c7d9b8f6f019959"\ncontent-type: image/jpeg\naccept-ranges: bytes\ncontent-range: bytes 0-1023/146515\ncontent-length: 1024\n')),(0,r.kt)("p",null,"The server responses with the ",(0,r.kt)("strong",{parentName:"p"},"206")," Partial Content status."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"Content-Length")," header now indicates the size of the requested range (and not the full size of the image)."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"Content-Range")," response header indicates where in the full resource this partial message belongs."),(0,r.kt)("p",null,"\u5982\u679c\u8bf7\u6c42\u5206\u7247\u4e0b\u8f7d\uff0c\u4f46\u662f\u539f\u8d44\u6e90\u5df2\u7ecf\u88ab\u66f4\u6539\u4e86\u600e\u4e48\u529e\u5462\uff1fWhen resuming to request more parts of a resource, you need to guarantee that the stored resource has not been modified since the last fragment has been received. The ",(0,r.kt)("strong",{parentName:"p"},"If-Range")," HTTP request header makes a range request conditional. This header can be used either with a ",(0,r.kt)("strong",{parentName:"p"},"Last-Modified")," validator, or with an ",(0,r.kt)("strong",{parentName:"p"},"ETag"),", but not with both."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"ETag")," (or entity tag) HTTP response header is an identifier for a specific version of a resource. Etags are similar to fingerprints."),(0,r.kt)("p",null,"\u5b9e\u6218\u53d1\u73b0\uff0c\u6709\u4e9b\u7f51\u7ad9\u54cd\u5e94\u5934\u5e26\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"Accept-Ranges"),"\uff0c\u5374\u4e0d\u652f\u6301\u65ad\u70b9\u7eed\u4f20\uff0c\u4f8b\u5982",(0,r.kt)("a",{parentName:"p",href:"https://www.bookben.net/"},"\u8fd9\u4e2a"),"\u3002\u56e0\u6b64\u6d4f\u89c8\u5668\u7684\u903b\u8f91\u662f\uff0c\u9996\u6b21\u8bf7\u6c42\u65f6\uff0c\u82e5\u54cd\u5e94\u5934\u4e0d\u5e26 ",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Length"),"\uff0c\u5224\u65ad\u4e3a\u4e0d\u652f\u6301\uff1b\u518d\u6b21\u8bf7\u6c42\u65f6\uff0c\u8bf7\u6c42\u5934\u5e26 ",(0,r.kt)("inlineCode",{parentName:"p"},"Range"),"\uff0c\u82e5\u54cd\u5e94\u5934\u6ca1\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Range"),"\uff0c\u5219\u540c\u6837\u8868\u793a\u4e0d\u652f\u6301\u65ad\u70b9\u7eed\u4f20\u3002"))}h.isMDXComponent=!0}}]);