"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9489],{88006:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));n(61839);const l={},r="The Linux Command Line",o={unversionedId:"linux-cmd-line",id:"linux-cmd-line",title:"The Linux Command Line",description:"\u4e66\u5728\u8fd9\u91cc\u4e0b\u8f7d\uff1aThe Linux Command Line by William Shotts",source:"@site/docs/language/linux-cmd-line.md",sourceDirName:".",slug:"/linux-cmd-line",permalink:"/docs/language/linux-cmd-line",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Dart",permalink:"/docs/language/dart"},next:{title:"Python",permalink:"/docs/language/python"}},s={},p=[{value:"1 - Introduction",id:"1---introduction",level:2},{value:"2, 3 - Navigation and Exploring",id:"2-3---navigation-and-exploring",level:2},{value:"4 - Manipulating",id:"4---manipulating",level:2},{value:"5 - Commands",id:"5---commands",level:2},{value:"6 - Redirection",id:"6---redirection",level:2},{value:"I/O",id:"io",level:3},{value:"Pipelines",id:"pipelines",level:3},{value:"7 - Expansion and Qouting",id:"7---expansion-and-qouting",level:2},{value:"8 - Advanced Keyboard Tricks",id:"8---advanced-keyboard-tricks",level:2},{value:"9 - Permissions",id:"9---permissions",level:2},{value:"10 - Processes",id:"10---processes",level:2},{value:"11 - The Environment",id:"11---the-environment",level:2},{value:"13 - Customizing the Prompt",id:"13---customizing-the-prompt",level:2},{value:"14 - Package Management",id:"14---package-management",level:2},{value:"\u7b2c\u4e09\u65b9\u5305",id:"\u7b2c\u4e09\u65b9\u5305",level:3},{value:"17 - Searching for Files",id:"17---searching-for-files",level:2},{value:"23 \u2013 Compiling Programs",id:"23--compiling-programs",level:2},{value:"24 - Shell",id:"24---shell",level:2},{value:"set",id:"set",level:3},{value:"eval",id:"eval",level:3},{value:"25 - Variables",id:"25---variables",level:2},{value:"26 - Shell Functions",id:"26---shell-functions",level:2},{value:"27 - If",id:"27---if",level:2},{value:"31 - While",id:"31---while",level:2},{value:"32 \u2013 Positional Parameters",id:"32--positional-parameters",level:2},{value:"33 \u2013 Looping with for",id:"33--looping-with-for",level:2},{value:"34 \u2013 Strings and Numbers",id:"34--strings-and-numbers",level:2},{value:"\u53c2\u6570\u5c55\u5f00",id:"\u53c2\u6570\u5c55\u5f00",level:3},{value:"\u5b57\u7b26\u4e32\u64cd\u4f5c",id:"\u5b57\u7b26\u4e32\u64cd\u4f5c",level:3},{value:"35 \u2013 Arrays",id:"35--arrays",level:2},{value:"Example",id:"example",level:2}],m={toc:p};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"the-linux-command-line"},"The Linux Command Line"),(0,i.kt)("p",null,"\u4e66\u5728\u8fd9\u91cc\u4e0b\u8f7d\uff1a",(0,i.kt)("a",{parentName:"p",href:"http://linuxcommand.org/tlcl.php"},"The Linux Command Line by William Shotts")),(0,i.kt)("p",null,"\u53c2\u8003\u624b\u518c\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://devhints.io/bash"},"https://devhints.io/bash")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"http://linuxcommand.org/lc3_writing_shell_scripts.php"},"LinuxCommand.org: Writing shell scripts.")),(0,i.kt)("h2",{id:"1---introduction"},"1 - Introduction"),(0,i.kt)("p",null,"Technically speaking, ",(0,i.kt)("strong",{parentName:"p"},"Linux")," is the name of the operating system's ",(0,i.kt)("strong",{parentName:"p"},"kernel"),", nothing more. The kernel is very important of course, since it makes the operating system go, but it's not enough to form a complete operating system. The ",(0,i.kt)("strong",{parentName:"p"},"GNU Project")," provides many, many free softwares running on top of the kernal."),(0,i.kt)("p",null,"When we speak of the ",(0,i.kt)("strong",{parentName:"p"},"command line"),", we are really referring to the ",(0,i.kt)("strong",{parentName:"p"},"shell"),". The shell is a ",(0,i.kt)("em",{parentName:"p"},"program")," that takes keyboard commands and passes them to the operating system to carry out. Almost all Linux distributions supply a shell program from the GNU Project called ",(0,i.kt)("strong",{parentName:"p"},"bash"),"."),(0,i.kt)("p",null,"When using a graphical user interface (GUI), we need another program called a terminal emulator, simply called ",(0,i.kt)("strong",{parentName:"p"},"ternimal"),", to interact with the shell."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"[me@linuxbox ~]$")," This is called a ",(0,i.kt)("strong",{parentName:"p"},"shell prompt")," and it will appear whenever the shell is ready to accept input."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ date")," displays the current time and date."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ cal")," displays a calendar of the current month."),(0,i.kt)("h2",{id:"2-3---navigation-and-exploring"},"2, 3 - Navigation and Exploring"),(0,i.kt)("p",null,"Unix-like systems such as Linux always have a single file system tree, regardless of how many drives or storage devices are attached to the computer. Storage devices are ",(0,i.kt)("strong",{parentName:"p"},"mounted")," at various points on the tree according to the whims of the system administrator."),(0,i.kt)("p",null,"On Linux systems, filenames that begin with a period character are hidden."),(0,i.kt)("p",null,"Filenames and commands in Linux, like Unix, are case sensitive."),(0,i.kt)("p",null,"To display the current working directory, we use the ",(0,i.kt)("inlineCode",{parentName:"p"},"$ pwd")," (print working directory) command."),(0,i.kt)("p",null,"Each user account is given its own ",(0,i.kt)("strong",{parentName:"p"},"home directory")," and it is the only place a regular user is allowed to write files."),(0,i.kt)("p",null,"Navigation:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"$ cd")," to your home directory"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"$ cd -")," to the previous working directory")),(0,i.kt)("p",null,"List directory contents: ",(0,i.kt)("inlineCode",{parentName:"p"},"$ ls")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-a")," list all files including hidden files"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-l")," display results in long format"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-i")," shows the inode number, the same inode number indicates the same file")),(0,i.kt)("p",null,"Most commands use options which consist of a single character preceded by a dash. Many commands also support long options, consisting of a word preceded by two dashes."),(0,i.kt)("p",null,"Also, many commands allow multiple short options to be strung together: ",(0,i.kt)("inlineCode",{parentName:"p"},"$ ls -al")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"-rw-r--r-- 1 root root 1186219 2017-04-03 11:05 kubuntu-leaflet.png")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The first character indicates the type of file",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'"-" means a regular file'),(0,i.kt)("li",{parentName:"ul"},'"d" indicates a directory'),(0,i.kt)("li",{parentName:"ul"},'"l" indicates a special kind of a file called a ',(0,i.kt)("strong",{parentName:"li"},"symbolic link")))),(0,i.kt)("li",{parentName:"ul"},"Access rights for",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"the file's owner"),(0,i.kt)("li",{parentName:"ul"},"members of the file's group"),(0,i.kt)("li",{parentName:"ul"},"everyone else"))),(0,i.kt)("li",{parentName:"ul"},"the file's number of hard links"),(0,i.kt)("li",{parentName:"ul"},"the username of the file's owner"),(0,i.kt)("li",{parentName:"ul"},"the name of the group that owns the file"),(0,i.kt)("li",{parentName:"ul"},"size of the file in bytes"),(0,i.kt)("li",{parentName:"ul"},"date and time of the file's last modification"),(0,i.kt)("li",{parentName:"ul"},"name of the file")),(0,i.kt)("p",null,"In Unix-like operating systems such as Linux, ",(0,i.kt)("strong",{parentName:"p"},"everything is a file"),". Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"$ file")," command to determine a file's type and print a brief description of the file's contents."),(0,i.kt)("h2",{id:"4---manipulating"},"4 - Manipulating"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Wildcards")," can be used with any command that accepts ",(0,i.kt)("strong",{parentName:"p"},"filenames")," as arguments."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Pattern"),(0,i.kt)("th",{parentName:"tr",align:null},"Matches"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"*"),(0,i.kt)("td",{parentName:"tr",align:null},"All files")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"g","*"),(0,i.kt)("td",{parentName:"tr",align:null},"Any file beginning with \u201cg\u201d")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"b","*",".txt"),(0,i.kt)("td",{parentName:"tr",align:null},"Any file beginning with \u201cb\u201d followed by any characters and ending with \u201c.txt\u201d")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Data???"),(0,i.kt)("td",{parentName:"tr",align:null},"Any file beginning with \u201cData\u201d followed by exactly three characters")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"BACKUP.","[0-9][0-9]","[0-9]"),(0,i.kt)("td",{parentName:"tr",align:null},"Any file beginning with \u201cBACKUP.\u201d followed by exactly three numerals")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[","[:upper:]","]","*"),(0,i.kt)("td",{parentName:"tr",align:null},"Any file beginning with an uppercase letter")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[","![:digit:]","]","*"),(0,i.kt)("td",{parentName:"tr",align:null},"Any file not beginning with a numeral")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"*","[","[:lower:]","123]"),(0,i.kt)("td",{parentName:"tr",align:null},"Any file ending with a lowercase letter or the numerals \u201c1\u201d, \u201c2\u201d, or \u201c3\u201d")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ mkdir")," create directories"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ cp file1 file2")," Copy file1 to file2. If file2 exists, it is ",(0,i.kt)("strong",{parentName:"p"},"overwritten")," with the contents of file1."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ cp file1 file2 dir1")," Copy file1 and file2 into directory dir1. The directory dir1 must already exist."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-a, --archive")," Copy items with all of their attributes, including ownerships and permissions."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-i, --interactive")," Before overwriting an existing file, prompt the user for confirmation."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-r --recursive")," Recursively copy directories and their contents. This option (or the ",(0,i.kt)("inlineCode",{parentName:"li"},"-a")," option) is required when copying directories."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-u --update")," When copying files from one directory to another, only copy files that either don't exist or are newer than the existing corresponding files, in the destination directory."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-v --verbose")," Display informative messages as the copy is performed.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ mv")," performs both file moving and file renaming."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ mv file1 file2")," Move file1 to file2. If file2 exists, it is ",(0,i.kt)("strong",{parentName:"p"},"overwritten")," with the contents of file1."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ rm")," command is used to remove (delete) files and directories."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-r --recursive")," Recursively delete directories. To delete a directory, this option must be specified."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-f --force")," Ignore nonexistent files and do not prompt.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ ln file link")," creates a ",(0,i.kt)("strong",{parentName:"p"},"hard link"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ ln -s item link")," create a ",(0,i.kt)("strong",{parentName:"p"},"symbolic link"),"."),(0,i.kt)("p",null,"In most Unix-like systems it is possible to have a file referenced by multiple names. By default, every file has a single ",(0,i.kt)("strong",{parentName:"p"},"hard link")," that gives the file its name. When a hard link is deleted, the link is removed but the contents of the file itself continue to exist until all links to the file are deleted."),(0,i.kt)("p",null,"Hard links cannot span physical devices. Hard links cannot reference directories, only files."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Modern practice prefers symbolic links.")," Symbolic links were created to overcome the limitations of hard links. Symbolic links work by creating a special type of file that contains a text pointer to the referenced file or directory."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"lrwxr-xr-x 1 yianzhou staff 3 May 16 08:36 fun-sym -> fun")),(0,i.kt)("p",null,'Notice the size of the symbolic link file is 3, which is the number of characters in the string "fun".'),(0,i.kt)("h2",{id:"5---commands"},"5 - Commands"),(0,i.kt)("p",null,"A command can be one of four different things:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"An executable program written in C and C++ or scripting languages such as the shell, Perl, Python, Ruby, etc."),(0,i.kt)("li",{parentName:"ol"},"A shell builtins."),(0,i.kt)("li",{parentName:"ol"},"A shell function."),(0,i.kt)("li",{parentName:"ol"},"An alias.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ type command")," displays a command's type."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ which command")," displays a executable's location. (locate a program file in the user's path)"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ whereis command")," locate programs"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ man command")," On most Linux systems, ",(0,i.kt)("inlineCode",{parentName:"p"},"man")," uses ",(0,i.kt)("inlineCode",{parentName:"p"},"less")," to display the manual page."),(0,i.kt)("p",null,"\u5728 man page \u4e2d\u8f93\u5165 ",(0,i.kt)("inlineCode",{parentName:"p"},"/"),"\uff0c\u7136\u540e\u8f93\u5165\u8981\u67e5\u627e\u7684\u5b57\u7b26\uff0c\u5c31\u53ef\u4ee5\u8df3\u5230\u5bf9\u5e94\u7684\u4f4d\u7f6e\u3002"),(0,i.kt)("p",null,"A note on notation: When square brackets appear in the description of a command's syntax, they indicate optional items. A vertical bar character indicates mutually exclusive items."),(0,i.kt)("p",null,"It's possible to put more than one command on a line by separating each command with a semicolon."),(0,i.kt)("p",null,"Create command alias: ",(0,i.kt)("inlineCode",{parentName:"p"},"$ alias foo='cd /usr; ls; cd -'"),". They vanish when our shell session ends."),(0,i.kt)("p",null,"To remove an alias, the ",(0,i.kt)("inlineCode",{parentName:"p"},"$ unalias command")," is used."),(0,i.kt)("p",null,"To see all the aliases defined in the environment, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"alias")," command without arguments."),(0,i.kt)("h2",{id:"6---redirection"},"6 - Redirection"),(0,i.kt)("h3",{id:"io"},"I/O"),(0,i.kt)("p",null,"Keeping with the Unix theme of \u201ceverything is a file,\u201d programs such as ",(0,i.kt)("inlineCode",{parentName:"p"},"ls")," actually send their results to a special file called ",(0,i.kt)("strong",{parentName:"p"},"standard output")," (often expressed as stdout) and their status messages to another file called ",(0,i.kt)("strong",{parentName:"p"},"standard error")," (stderr). By default, both standard output and standard error are linked to the screen and not saved into a disk file."),(0,i.kt)("p",null,"We can ",(0,i.kt)("strong",{parentName:"p"},"redirect")," the input and output of commands to and from files, as well as connect multiple commands together into powerful ",(0,i.kt)("strong",{parentName:"p"},"command pipelines"),"."),(0,i.kt)("p",null,"To redirect standard output to another file instead of the screen, we use the ",(0,i.kt)("inlineCode",{parentName:"p"},">")," redirection operator."),(0,i.kt)("p",null,"We append redirected output to a file instead of overwriting the file from the beginning by using the ",(0,i.kt)("inlineCode",{parentName:"p"},">>")," redirection operator."),(0,i.kt)("p",null,"To redirect standard error we must refer to its ",(0,i.kt)("strong",{parentName:"p"},"file descriptor"),". A program can produce output on any of several numbered file streams, the first three are standard input, output and error, the shell references them internally as file descriptors 0, 1, and 2."),(0,i.kt)("p",null,"We can redirect standard error with ",(0,i.kt)("inlineCode",{parentName:"p"},"2>")," notation."),(0,i.kt)("p",null,"We use the single notation ",(0,i.kt)("inlineCode",{parentName:"p"},"&>")," to redirect both standard output and standard error to the file."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"<")," uses a file as a source of standard input."),(0,i.kt)("h3",{id:"pipelines"},"Pipelines"),(0,i.kt)("p",null,"Using the pipe operator ",(0,i.kt)("inlineCode",{parentName:"p"},"|"),", the standard output of one command can be piped into the standard input of another."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"uniq")," command is often used in conjunction with ",(0,i.kt)("inlineCode",{parentName:"p"},"sort"),". ",(0,i.kt)("inlineCode",{parentName:"p"},"uniq")," accepts a sorted list of data and removes any duplicates from the list."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ ls /bin /usr/bin | sort | uniq | less")),(0,i.kt)("h2",{id:"7---expansion-and-qouting"},"7 - Expansion and Qouting"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ echo")," prints its text arguments on standard output."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5206\u884c\u6253\u5370\necho $PATH | tr ':' '\\n'\n")),(0,i.kt)("p",null,"Each time we type a command and press the Enter key, bash performs several substitutions upon the text before it carries out our command. The process that makes this happen is called ",(0,i.kt)("strong",{parentName:"p"},"expansion"),". With expansion, we enter something and it is expanded into something else before the shell acts upon it."),(0,i.kt)("p",null,"The mechanism by which wildcards work is called pathname expansion."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo /usr/*/share\n/usr/kerberos/share /usr/local/share\n")),(0,i.kt)("p",null,"Tilde Expansion: The tilde character (~) has a special meaning. When used at the beginning of a word, it expands into the name of the home directory of the named user or, if no user is named, the home directory of the current user."),(0,i.kt)("p",null,"Arithmetic expansion uses the following form: ",(0,i.kt)("inlineCode",{parentName:"p"},"$((expression))"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"$ echo $((2 + 2))")),(0,i.kt)("p",null,"Brace expansion can create multiple text strings from a pattern containing braces."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ mkdir {0..9}\n$ ls\n0 1 2 3 4 5 6 7 8 9\n")),(0,i.kt)("p",null,"To invoke ",(0,i.kt)("strong",{parentName:"p"},"parameter expansion"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"$ echo $USER")),(0,i.kt)("p",null,"To see a list of available variables: ",(0,i.kt)("inlineCode",{parentName:"p"},"$ printenv | less")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Command substitution")," allows us to use the output of a command as an expansion."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ file $(ls -d /usr/bin/* | grep unzip)")," In this example, the results of the pipeline became the argument list of the file command."),(0,i.kt)("p",null,"Parameter expansion, arithmetic expansion, and command substitution still take place within ",(0,i.kt)("strong",{parentName:"p"},"double quotes"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ echo "$USER $((2+2))"\n4\n')),(0,i.kt)("p",null,"By default, word-splitting looks for the presence of spaces, tabs, and newlines (linefeed characters) and treats them as delimiters between words. This means unquoted spaces, tabs, and newlines are not considered to be part of the text. They serve only as separators."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'# the unquoted command substitution resulted in a command line containing 38 arguments\necho $(cal)\n# resulted in a command line with one argument that includes the embedded spaces and newlines\necho "$(cal)"\n')),(0,i.kt)("p",null,"If we need to suppress all expansions, we use ",(0,i.kt)("strong",{parentName:"p"},"single quotes"),"."),(0,i.kt)("p",null,"\u5355\u5f15\u53f7\u4f1a\u5b8c\u5168\u6291\u5236\u8868\u8fbe\u5f0f\u5c55\u5f00\uff0c\u901a\u5e38\u6211\u4eec\u4f7f\u7528\u53cc\u5f15\u53f7\uff0c\u7279\u6b8a\u7b26\u53f7\u53ef\u4ee5\u4f7f\u7528\u53cd\u659c\u6760\u8f6c\u4e49\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'echo "The balance for user $USER is: \\$5.00"\n')),(0,i.kt)("p",null,"It is possible to use characters in filenames that normally have special meaning to the shell. These would include $, !, &, spaces, and others. \u6587\u4ef6\u540d\u4e2d\u7684\u8fd9\u4e9b\u7279\u6b8a\u5b57\u7b26\u9700\u8981\u7528\u53cd\u659c\u6760\u8f6c\u4e49\u3002"),(0,i.kt)("h2",{id:"8---advanced-keyboard-tricks"},"8 - Advanced Keyboard Tricks"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"clear"),": Clear the screen"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Ctrl-a: Move cursor to the beginning of the line."),(0,i.kt)("li",{parentName:"ul"},"Ctrl-e: Move cursor to the end of the line."),(0,i.kt)("li",{parentName:"ul"},"Ctrl-l: Clear the screen and move the cursor to the top-left corner. The ",(0,i.kt)("inlineCode",{parentName:"li"},"clear")," command does the same thing."),(0,i.kt)("li",{parentName:"ul"},"Ctrl-u: clear up to the beginning"),(0,i.kt)("li",{parentName:"ul"},"Ctrl-w: delete just a word")),(0,i.kt)("p",null,"\u5411\u4e0a\u7ffb\u9875\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"Command + Fn + \u2b06\ufe0f")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"history"),": Display the contents of the history list"),(0,i.kt)("p",null,"\u5386\u53f2\u8bb0\u5f55\u53ef\u4ee5\u7528\u884c\u53f7\u76f4\u63a5\u5c55\u5f00\uff0c\u4f8b\u5982\u6267\u884c\u7b2c 88 \u884c\u7684\u547d\u4ee4\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"!88")),(0,i.kt)("p",null,"zsh \u53ef\u4ee5\u5b58\u50a8\u591a\u8fbe\u6570\u5343\u6761\u5386\u53f2\u8bb0\u5f55\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4ece\u4e2d\u67e5\u627e\u547d\u4ee4\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"history | grep /usr/bin")),(0,i.kt)("p",null,"Ctrl-r: \u5728\u5386\u53f2\u8bb0\u5f55\u4e2d\u641c\u7d22\uff0cCtrl-c \u9000\u51fa\u641c\u7d22\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"script")," \u53ef\u4ee5\u5c06\u63a5\u4e0b\u6765\u8fd0\u884c\u7684\u547d\u4ee4\u53ca\u5176\u8f93\u51fa\uff0c\u5168\u90e8\u5199\u5165\u5230\u4e00\u4e2a\u6587\u4ef6\u91cc\u9762\uff0c\u65b9\u4fbf\u518d\u6b21\u67e5\u770b\uff0c\u6309 Ctrl-D \u7ec8\u6b62\u3002"),(0,i.kt)("h2",{id:"9---permissions"},"9 - Permissions"),(0,i.kt)("p",null,"How the file see users: ",(0,i.kt)("strong",{parentName:"p"},"Owners"),", ",(0,i.kt)("strong",{parentName:"p"},"Group Members"),", and ",(0,i.kt)("strong",{parentName:"p"},"Everybody Else"),"."),(0,i.kt)("p",null,"To find out information about your identity, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"id")," command."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"echo \"$(id)\" | tr ' ' '\\n'\n")),(0,i.kt)("p",null,"User accounts are defined in the ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/passwd")," file and groups are defined in the ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/group")," file."),(0,i.kt)("p",null,"When user accounts and groups are created, these files are modified along with ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/shadow")," which holds information about the user's password."),(0,i.kt)("p",null,"Access rights to files and directories are defined in terms of ",(0,i.kt)("strong",{parentName:"p"},"read")," access, ",(0,i.kt)("strong",{parentName:"p"},"write")," access, and ",(0,i.kt)("strong",{parentName:"p"},"execution")," access."),(0,i.kt)("p",null,"To change the mode (permissions) of a file or directory, the ",(0,i.kt)("inlineCode",{parentName:"p"},"chmod")," command is used."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"chmod")," supports two distinct ways of specifying mode changes: ",(0,i.kt)("strong",{parentName:"p"},"octal number")," representation, or symbolic representation."),(0,i.kt)("p",null,"\u5e38\u7528\u7684\u516b\u8fdb\u5236\u6743\u9650\uff1a7 (rwx), 6 (rw-), 5 (r-x), 4 (r--), and 0 (---)."),(0,i.kt)("p",null,"Symbolic notation is divided into three parts:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Who the change will affect: ",(0,i.kt)("inlineCode",{parentName:"li"},"u")," for user, ",(0,i.kt)("inlineCode",{parentName:"li"},"g")," for group, ",(0,i.kt)("inlineCode",{parentName:"li"},"o")," for others, ",(0,i.kt)("inlineCode",{parentName:"li"},"a")," for all"),(0,i.kt)("li",{parentName:"ul"},"Which operation will be performed: ",(0,i.kt)("inlineCode",{parentName:"li"},"+"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"-")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"=")),(0,i.kt)("li",{parentName:"ul"},"What permission will be set: ",(0,i.kt)("inlineCode",{parentName:"li"},"r"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"w")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"x"))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"u+x,go=rx")," \u7ed9 user \u52a0\u6267\u884c\u6743\u9650\uff0cgroup \u548c\u5176\u5b83\u7684\u6743\u9650\u8bbe\u7f6e\u4e3a\u8bfb\u4e0e\u6267\u884c\u3002"),(0,i.kt)("h2",{id:"10---processes"},"10 - Processes"),(0,i.kt)("p",null,"The most commonly used command to view processes is ",(0,i.kt)("inlineCode",{parentName:"p"},"ps"),"."),(0,i.kt)("p",null,"By default, ",(0,i.kt)("inlineCode",{parentName:"p"},"ps")," doesn't show us very much, just the processes associated with the current terminal session."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ps x"),' show all of our processes. The presence of a "?" in the TTY column indicates no controlling terminal.'),(0,i.kt)("p",null,"To see a more dynamic view of the machine's activity, we use the ",(0,i.kt)("inlineCode",{parentName:"p"},"top")," command."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"kill")," command is used to send signals to programs. If no signal is specified on the command line, then the TERM (terminate) signal is sent by\ndefault."),(0,i.kt)("p",null,"Common Signals: ",(0,i.kt)("inlineCode",{parentName:"p"},"1")," for hangup, ",(0,i.kt)("inlineCode",{parentName:"p"},"2")," for interrupt, ",(0,i.kt)("inlineCode",{parentName:"p"},"9")," for kill, ",(0,i.kt)("inlineCode",{parentName:"p"},"15")," for terminate."),(0,i.kt)("p",null,"\u6740\u6b7b\u8fdb\u7a0b\uff1a\u6253\u5f00 ",(0,i.kt)("inlineCode",{parentName:"p"},"Activity Monitor"),"\uff0c\u67e5\u770b PID\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"kill -9 [pid]")),(0,i.kt)("h2",{id:"11---the-environment"},"11 - The Environment"),(0,i.kt)("p",null,"While most programs use configuration files to store program settings, some programs also look for values stored in the ",(0,i.kt)("strong",{parentName:"p"},"environment")," to adjust their behavior."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"set")," command will show both the shell and environment variables, while ",(0,i.kt)("inlineCode",{parentName:"p"},"printenv")," will only display the latter."),(0,i.kt)("p",null,"The printenv command can also list the value of a specific variable: ",(0,i.kt)("inlineCode",{parentName:"p"},"printenv USER")),(0,i.kt)("p",null,"When we log on to the system, the bash program starts, and reads a series of configuration scripts called startup files, which define the default environment shared by all users. This is followed by more startup files in our home directory that define our personal environment."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.bashrc")," file is probably the most important startup file from the ordinary user\u2019s point of view."),(0,i.kt)("h2",{id:"13---customizing-the-prompt"},"13 - Customizing the Prompt"),(0,i.kt)("p",null,"\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u5df2\u5b89\u88c5\u7684 shell\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"cat /etc/shells")),(0,i.kt)("p",null,"\u5207\u6362\u6210 zsh\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"chsh -s /bin/zsh")),(0,i.kt)("p",null,"\u5b89\u88c5 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ohmyzsh/ohmyzsh"},"ohmyzsh")),(0,i.kt)("p",null,"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"~/.zshrc")),(0,i.kt)("p",null,"\u5b89\u88c5 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/INSTALL.md"},"zsh-syntax-highlighting"),"\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"brew install zsh-syntax-highlighting")),(0,i.kt)("p",null,"\u5b89\u88c5 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md"},"zsh-autosuggestions")),(0,i.kt)("h2",{id:"14---package-management"},"14 - Package Management"),(0,i.kt)("p",null,"Homebrew \u662f\u4e00\u4e2a\u7b80\u5355\u6613\u7528\u7684\u5305\u7ba1\u7406\u5668\uff0c\u53ef\u4ee5\u8ba9\u4f60\u8f7b\u677e\u4e0b\u8f7d\u3001\u7ba1\u7406\u7b2c\u4e09\u65b9\u5e94\u7528\u3002"),(0,i.kt)("p",null,"\u67e5\u770b\u8fc7\u671f\u5e94\u7528\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"brew outdated")),(0,i.kt)("p",null,"\u66f4\u65b0\u6240\u6709\u5e94\u7528\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"brew upgrade")),(0,i.kt)("p",null,"\u6e05\u9664\u7f13\u5b58\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"brew cleanup")),(0,i.kt)("h3",{id:"\u7b2c\u4e09\u65b9\u5305"},"\u7b2c\u4e09\u65b9\u5305"),(0,i.kt)("p",null,"\u663e\u793a\u6587\u4ef6\u5939\u76ee\u5f55\u6811\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"brew install tree"),"\uff0c\u53ef\u6307\u5b9a\u5c42\u7ea7\u6df1\u5ea6 ",(0,i.kt)("inlineCode",{parentName:"p"},"tree -L 2")),(0,i.kt)("h2",{id:"17---searching-for-files"},"17 - Searching for Files"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ cat")," is often used to display short text files."),(0,i.kt)("p",null,"Since ",(0,i.kt)("inlineCode",{parentName:"p"},"cat")," can accept more than one file as an argument, it can also be used to join files together:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"cat movie.mpeg.0* > movie.mpeg")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ grep")," is to find text patterns within files, ",(0,i.kt)("inlineCode",{parentName:"p"},"-i")," ignore case when performing the search."),(0,i.kt)("p",null,"\u5982\u679c\u60f3\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"grep")," \u641c\u7d22 ",(0,i.kt)("inlineCode",{parentName:"p"},"-D"),"\uff0c\u8fd9\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"-D")," \u4f1a\u88ab\u5f53\u6210 option\uff0c\u8fd9\u65f6\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"--")," \u53ef\u4ee5 delimit the option list."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"grep -- -D")),(0,i.kt)("p",null,'The name "grep" is actually derived from the phrase "global regular expression print". In essence, ',(0,i.kt)("inlineCode",{parentName:"p"},"grep")," searches text files for the occurrence text matching a specified ",(0,i.kt)("strong",{parentName:"p"},"regular expression")," and outputs any line containing a match to standard output."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'# \u5217\u51fa\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\uff0c\u67e5\u627e\u540d\u5b57\u91cc\u542b "pod" \u7684\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\nls | grep -i pod\n')),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"$ head")," command prints the first ten lines of a file, and the ",(0,i.kt)("inlineCode",{parentName:"p"},"$ tail")," command prints the last ten lines."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"$ less")," command is a program to view text files. To exit less, press the q key."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/")," Search forward to the next occurrence of characters"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"n")," Search for the next occurrence of the previous search")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"find")," program searches a given directory (",(0,i.kt)("strong",{parentName:"p"},"and its subdirectories"),")."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"d")," for directories, ",(0,i.kt)("inlineCode",{parentName:"p"},"f")," for files, ",(0,i.kt)("inlineCode",{parentName:"p"},"l")," for symbolic links."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'find ~/Downloads -type d | wc -l\n\n# \u5927\u5c0f\u5199\u654f\u611f\nfind ~/Downloads -type f -name "*.JPG"\n')),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"touch")," command is usually used to set or update the access, change, and modify times of files."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# \u521b\u5efa playground \u6587\u4ef6\u5939\uff0c\u91cc\u9762\u6709 100 \u4e2a\u6587\u4ef6\u5939\nmkdir -p playground/dir-{001..100}\n# \u6bcf\u4e2a\u6587\u4ef6\u5939\u91cc\u9762\u521b\u5efa 26 \u4e2a\u6587\u4ef6\ntouch playground/dir-{001..100}/file-{A..Z}\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"stat")," command reveals all that the system understands about a file and its attributes."),(0,i.kt)("h2",{id:"23--compiling-programs"},"23 \u2013 Compiling Programs"),(0,i.kt)("p",null,"Programs written in assembly language are processed into machine language by a program called an ",(0,i.kt)("strong",{parentName:"p"},"assembler"),"."),(0,i.kt)("p",null,"Programs written in high-level programming languages are converted into machine language by processing them with another program, called a ",(0,i.kt)("strong",{parentName:"p"},"compiler"),". Some compilers translate high-level instructions into assembly language and then use an assembler to perform the final stage of translation into machine language."),(0,i.kt)("p",null,"A process often used in conjunction with compiling is called linking. A program called a ",(0,i.kt)("strong",{parentName:"p"},"linker")," is used to form the connections between the output of the compiler and the ",(0,i.kt)("em",{parentName:"p"},"libraries")," that the compiled program requires. The final result of this process is the executable program file, ready for use."),(0,i.kt)("p",null,"Scripted languages are executed by a special program called an ",(0,i.kt)("strong",{parentName:"p"},"interpreter"),"."),(0,i.kt)("p",null,"The C compiler used almost universally in the Linux environment is called ",(0,i.kt)("strong",{parentName:"p"},"gcc"),"."),(0,i.kt)("p",null,"For our compiling exercise, we are going to compile a program from the GNU Project called ",(0,i.kt)("a",{parentName:"p",href:"https://www.gnu.org/software/diction/"},"diction"),". This handy little program checks text files for writing quality and style."),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},"makefile")," is a configuration file that instructs the make program exactly how to build the program."),(0,i.kt)("p",null,"The make program can be used for any task that needs to maintain a target/dependency relationship, not just for compiling source code."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The purpose of the make utility is to determine automatically which pieces of a large program need to be recompiled, and issue the commands to recompile them.")),(0,i.kt)("h2",{id:"24---shell"},"24 - Shell"),(0,i.kt)("p",null,"The shell is both a powerful command line interface to the system and a scripting language interpreter."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"#!/bin/zsh\n# This is our first script.\necho 'Hello World!'\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"#!")," character sequence is, in fact, a special construct called a ",(0,i.kt)("strong",{parentName:"p"},"shebang"),". The shebang is used to tell the kernel the name of the interpreter that should be used to execute the script that follows. Every shell script should include this as its first line."),(0,i.kt)("p",null,"The program we will write is a report generator. It will present various statistics about our system and its status and will produce this report in HTML format."),(0,i.kt)("h3",{id:"set"},"set"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Set")," Builtin: ",(0,i.kt)("a",{parentName:"p",href:"https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html"},"https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"-e"),": Exit immediately if a command returns a non-zero status."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"-x"),": Print a trace of simple commands before they are executed."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"-u"),": Treat unset variables and parameters as an error when performing parameter expansion."),(0,i.kt)("h3",{id:"eval"},"eval"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"eval")," function: ",(0,i.kt)("a",{parentName:"p",href:"https://www.gnu.org/software/make/manual/html_node/Eval-Function.html"},"https://www.gnu.org/software/make/manual/html_node/Eval-Function.html")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"FORMAT_CMD=\"git diff --cached --name-only -- '*.dart'\"\neval $FORMAT_CMD | xargs -I '{}' dart format -l 120 {}\n")),(0,i.kt)("p",null,"\u4e0d\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"eval")," \u7684\u8bdd\uff0c\u4f1a\u6709\u9519\u8bef\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"xargs: dart: No such file or directory")),(0,i.kt)("h2",{id:"25---variables"},"25 - Variables"),(0,i.kt)("p",null,"\u60ef\u7528\u6cd5\uff1a\u5168\u5927\u5199\u5b57\u6bcd\u8868\u793a\u5e38\u91cf\uff0c\u5c0f\u5199\u5b57\u6bcd\u8868\u793a\u53d8\u91cf\u3002"),(0,i.kt)("p",null,"\u5b9a\u4e49\u53d8\u91cf\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},'TITLE="System Information Report"')),(0,i.kt)("p",null,"\u5c55\u5f00\u53d8\u91cf\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"$TITLE")),(0,i.kt)("p",null,"Unlike some other programming languages, the shell does not care about the type of data assigned to a variable; ",(0,i.kt)("strong",{parentName:"p"},"it treats them all as strings.")," You can force the shell to restrict the assignment to integers by using the declare command with the -i option, but, like setting variables as readonly, this is rarely done."),(0,i.kt)("p",null,"During expansion, variable names may be surrounded by optional curly braces, ",(0,i.kt)("inlineCode",{parentName:"p"},"{}"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'mv "$filename" "${filename}1"')),(0,i.kt)("p",null,"It's good practice is to enclose variables and command substitutions in double quotes to limit the effects of word-splitting by the shell. Quoting is especially important when a variable might contain a filename."),(0,i.kt)("h2",{id:"26---shell-functions"},"26 - Shell Functions"),(0,i.kt)("p",null,"Shell functions are \u201cmini-scripts\u201d that are located inside other scripts and can act as autonomous programs."),(0,i.kt)("p",null,"Shell \u51fd\u6570\u7684\u5f62\u5f0f\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"function step2 {\n    commands\n    return\n}\n")),(0,i.kt)("p",null,"\u6216\uff08\u63a8\u8350\u4f7f\u7528\uff09\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"step2() {\n    commands\n    return\n}\n")),(0,i.kt)("p",null,"\u8c03\u7528\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"step"),"\uff0c\u6ce8\u610f\uff0c\u6ca1\u6709\u6263\u53f7 ",(0,i.kt)("inlineCode",{parentName:"p"},"()"),"\u3002"),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u4e3a\u4e86\u5c06\u51fd\u6570\u8c03\u7528\u8bc6\u522b\u4e3a shell \u51fd\u6570\u800c\u4e0d\u662f\u5916\u90e8\u7a0b\u5e8f\uff0cshell \u51fd\u6570\u5b9a\u4e49\u5fc5\u987b\u5728\u8c03\u7528\u4e4b\u524d\u51fa\u73b0\u3002"),(0,i.kt)("p",null,"\u51fd\u6570\u53ef\u4ee5\u6709\u5c40\u90e8\u53d8\u91cf\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'funct_2() {\n    local foo # variable foo local to funct_2\n    foo=2\n    echo "funct_2: foo = $foo"\n}\n')),(0,i.kt)("h2",{id:"27---if"},"27 - If"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$?")," \u83b7\u53d6\u547d\u4ee4\u884c\u8fd4\u56de\u72b6\u6001"),(0,i.kt)("p",null,"test File expressions:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'#!/bin/bash\n\n# test-file: Evaluate the status of a file\n\nFILE=~/.bashrc\n\nif [ -e "$FILE" ]; then\n    if [ -f "$FILE" ]; then\n        echo "$FILE is a regular file."\n    fi\n    if [ -d "$FILE" ]; then\n        echo "$FILE is a directory."\n    fi\n    if [ -r "$FILE" ]; then\n        echo "$FILE is readable."\n    fi\n    if [ -w "$FILE" ]; then\n        echo "$FILE is writable."\n    fi\n    if [ -x "$FILE" ]; then\n        echo "$FILE is executable/searchable."\n    fi\nelse\n    echo "$FILE does not exist"\n    exit 1\nfi\n\nexit\n')),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"exit")," command accepts a single, optional argument, which becomes the script\u2019s exit status. When no argument is passed, the exit status defaults to the exit status of the last command executed."),(0,i.kt)("p",null,"test String Expressions:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'#!/bin/bash\n\n# test-string: evaluate the value of a string\n\nANSWER=maybe\n\nif [ -z "$ANSWER" ]; then\n    echo "The length of string is zero." >&2\n    exit 1\nfi\nif [ -n "$ANSWER" ]; then\n    echo "The string is not empty."\nfi\nif [ "$ANSWER" = "yes" ]; then\n    echo "The answer is YES."\nelif [ "$ANSWER" = "no" ]; then\n    echo "The answer is NO."\nelse\n    echo "The answer is UNKNOWN."\nfi\n')),(0,i.kt)("p",null,"test Integer Expressions:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'if [ "$INT" -eq 0 ]; then\n    echo "INT is zero."\nfi\n')),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"[[ ]]")," command is similar to test (",(0,i.kt)("inlineCode",{parentName:"p"},"[]"),"), but adds an important new string expression: ",(0,i.kt)("inlineCode",{parentName:"p"},"string =~ regex")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'if [[ "$INT" =~ ^-?[0-9]+$ ]]; then\n    echo $INT\nfi\n')),(0,i.kt)("p",null,"Another added feature of ",(0,i.kt)("inlineCode",{parentName:"p"},"[[ ]]")," is that the ",(0,i.kt)("inlineCode",{parentName:"p"},"==")," operator supports pattern matching the same way pathname expansion does."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"if [[ $FILE == foo.* ]]; then\n    echo \"$FILE matches pattern 'foo.*'\"\nfi\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"(( ))")," supports a full set of arithmetic evaluations."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'if (( ((INT % 2)) == 0)); then\n    echo "INT is even."\nelse\n    echo "INT is odd."\nfi\n')),(0,i.kt)("p",null,"Because the compound command ",(0,i.kt)("inlineCode",{parentName:"p"},"(( ))")," is part of the shell syntax rather than an ordinary command, and it deals only with integers, it is able to recognize variables by name and does not require expansion to be performed."),(0,i.kt)("p",null,"test and ",(0,i.kt)("inlineCode",{parentName:"p"},"[[ ]]")," use different operators to represent logical operations:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Operation"),(0,i.kt)("th",{parentName:"tr",align:null},"test"),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"th"},"[[ ]]")," and ",(0,i.kt)("inlineCode",{parentName:"th"},"(( ))")))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"AND"),(0,i.kt)("td",{parentName:"tr",align:null},"-a"),(0,i.kt)("td",{parentName:"tr",align:null},"&&")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"OR"),(0,i.kt)("td",{parentName:"tr",align:null},"-o"),(0,i.kt)("td",{parentName:"tr",align:null},"|","|")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"NOT"),(0,i.kt)("td",{parentName:"tr",align:null},"!"),(0,i.kt)("td",{parentName:"tr",align:null},"!")))),(0,i.kt)("p",null,"Since all expressions and operators used by test are treated as command arguments by the shell (unlike ",(0,i.kt)("inlineCode",{parentName:"p"},"[[ ]]")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"(( ))")," ), characters that have special meaning to bash, such as ",(0,i.kt)("inlineCode",{parentName:"p"},"<"),", ",(0,i.kt)("inlineCode",{parentName:"p"},">"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"("),", and ",(0,i.kt)("inlineCode",{parentName:"p"},")"),", must be quoted or escaped."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"bash")," provides two ",(0,i.kt)("strong",{parentName:"p"},"control operators")," that can perform branching. The ",(0,i.kt)("inlineCode",{parentName:"p"},"&&")," (AND) and ",(0,i.kt)("inlineCode",{parentName:"p"},"||")," (OR) operators work like the logical operators in the ",(0,i.kt)("inlineCode",{parentName:"p"},"[[ ]]")," compound command."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# command1 \u6210\u529f\u7684\u524d\u63d0\u4e0b\uff0c\u624d\u6267\u884c command2\nmkdir temp && cd temp\n# command1 \u5931\u8d25\u7684\u524d\u63d0\u4e0b\uff0c\u624d\u6267\u884c command2\n[[ -d temp ]] || mkdir temp\n")),(0,i.kt)("h2",{id:"31---while"},"31 - While"),(0,i.kt)("p",null,"In bash, multiple-choice compound command is called ",(0,i.kt)("inlineCode",{parentName:"p"},"case"),"."),(0,i.kt)("p",null,"The patterns used by case are the same as those used by pathname expansion. Patterns are terminated with a ",(0,i.kt)("inlineCode",{parentName:"p"},")")," character."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'case "$REPLY" in\nq | Q)\n    echo "Program terminated."\n    exit\n    ;;\na | A)\n    echo "Hostname: $HOSTNAME"\n    uptime\n    ;;\nb | B)\n    df -h\n    ;;\n*)\n    echo "Invalid entry" >&2\n    exit 1\n    ;;\nesac\n')),(0,i.kt)("p",null,"The addition of the ",(0,i.kt)("inlineCode",{parentName:"p"},";;&")," syntax allows case to continue to the next test rather than simply terminating."),(0,i.kt)("h2",{id:"32--positional-parameters"},"32 \u2013 Positional Parameters"),(0,i.kt)("p",null,"The shell provides positional parameters (",(0,i.kt)("inlineCode",{parentName:"p"},"$0")," ...) that contain the individual words on the command line."),(0,i.kt)("p",null,"The shell also provides a variable, ",(0,i.kt)("inlineCode",{parentName:"p"},"$#"),", that contains the number of arguments on the command line."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"shift")," command causes all the parameters to \u201cmove down one\u201d each time it is executed."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'#!/bin/bash\n# posit-param2: script to display all arguments\ncount=1\nwhile [[ $# -gt 0 ]]; do\n    echo "Argument $count = $1"\n    count=$((count + 1))\n    shift\ndone\n')),(0,i.kt)("p",null,"Each time shift is executed, the value of ",(0,i.kt)("inlineCode",{parentName:"p"},"$2")," is moved to ",(0,i.kt)("inlineCode",{parentName:"p"},"$1"),", the value of ",(0,i.kt)("inlineCode",{parentName:"p"},"$3")," is moved to ",(0,i.kt)("inlineCode",{parentName:"p"},"$2")," and so on. The value of ",(0,i.kt)("inlineCode",{parentName:"p"},"$#")," is also reduced by one."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$0")," always contains the full pathname of the first item on the command line (i.e., the name of the program)."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'#!/bin/bash\n# posit-params3: script to demonstrate $* and $@\nprint_params() {\n    echo "\\$1 = $1"\n    echo "\\$2 = $2"\n    echo "\\$3 = $3"\n    echo "\\$4 = $4"\n    echo "\\n"\n}\n\npass_params() {\n    print_params $*\n    print_params "$*"\n    print_params $@\n    print_params "$@"\n}\n\npass_params "word" "words with spaces"\n')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$*")," \u5c55\u5f00\u4e3a\u4f4d\u7f6e\u53c2\u6570\u5217\u8868\uff0c\u4ece 1 \u5f00\u59cb\u3002\u5f53\u88ab\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\u65f6\uff0c\u5b83\u5c55\u5f00\u4e3a\u5305\u542b\u6240\u6709\u4f4d\u7f6e\u53c2\u6570\u7684\u53cc\u5f15\u53f7\u5b57\u7b26\u4e32\uff0c\u6bcf\u4e2a\u53c2\u6570\u7531\u7a7a\u683c\u5206\u9694\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$@")," \u5c55\u5f00\u4e3a\u4f4d\u7f6e\u53c2\u6570\u5217\u8868\uff0c\u4ece 1 \u5f00\u59cb\u3002\u5f53\u88ab\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\u65f6\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u53c2\u6570\u8f6c\u6362\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u5355\u8bcd\uff0c\u5c31\u597d\u50cf\u5b83\u88ab\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\u4e00\u6837\u3002"),(0,i.kt)("p",null,'"$@" is by far the most useful for most situations because it preserves the integrity of each positional parameter. To ensure safety, it should always be used.'),(0,i.kt)("h2",{id:"33--looping-with-for"},"33 \u2013 Looping with for"),(0,i.kt)("p",null,"The original ",(0,i.kt)("inlineCode",{parentName:"p"},"for")," command\u2019s syntax is as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"for variable in words; do\n    commands\ndone\n")),(0,i.kt)("p",null,"Recent versions of bash have added a second form of ",(0,i.kt)("inlineCode",{parentName:"p"},"for")," command syntax:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"for ((expression1; expression2; expression3)); do\n    commands\ndone\n")),(0,i.kt)("h2",{id:"34--strings-and-numbers"},"34 \u2013 Strings and Numbers"),(0,i.kt)("h3",{id:"\u53c2\u6570\u5c55\u5f00"},"\u53c2\u6570\u5c55\u5f00"),(0,i.kt)("p",null,"\u57fa\u672c\u5f62\u5f0f\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"$a"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"${a}"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"${11}"),"\uff08\u7b2c 11 \u4e2a\u4f4d\u7f6e\u53c2\u6570\uff09"),(0,i.kt)("p",null,"\u5904\u7406\u7a7a\u53d8\u91cf\uff1a"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter:-word}")," If parameter is unset (i.e., does not exist) or is empty, this expansion results in the value of word."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter:=word}")," If parameter is unset or empty, this expansion results in the value of word. In addition, the value of word is assigned to parameter."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter:?word}")," If parameter is unset or empty, this expansion causes the script to exit with an error, and the contents of word are sent to standard error."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter:+word}")," If parameter is unset or empty, the expansion results in nothing. If parameter is not empty, the value of word is substituted for parameter; however, the value of parameter is not changed."),(0,i.kt)("h3",{id:"\u5b57\u7b26\u4e32\u64cd\u4f5c"},"\u5b57\u7b26\u4e32\u64cd\u4f5c"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${#parameter}")," \u82e5 ",(0,i.kt)("inlineCode",{parentName:"p"},"parameter")," \u4e3a\u5b57\u7b26\u4e32\uff0c\u5c55\u5f00\u4e3a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff1b\u82e5 ",(0,i.kt)("inlineCode",{parentName:"p"},"parameter"),"\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"@")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"*"),"\uff0c\u5c55\u5f00\u4e3a\u4f4d\u7f6e\u53c2\u6570\u7684\u4e2a\u6570\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter:offset}"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"${parameter:offset:length}")," These expansions are used to extract a portion of the string contained in parameter. The extraction begins at offset characters from the beginning of the string and continues until the end of the string, unless length is specified. If parameter is ",(0,i.kt)("inlineCode",{parentName:"p"},"@"),", the result of the expansion is length positional parameters, starting at offset."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter#pattern}"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"${parameter##pattern}")," These expansions remove a leading portion of the string contained in parameter defined by pattern. pattern is a wildcard pattern like those used in pathname expansion. The dif- ference in the two forms is that the # form removes the shortest match, while the ## form removes the longest match."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter%pattern}"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"${parameter%%pattern}")," They remove text from the end of the string contained in parameter rather than from the beginning."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"${parameter/pattern/string}")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"${parameter//pattern/string}")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"${parameter/#pattern/string}")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"${parameter/%pattern/string}"))),(0,i.kt)("p",null,"This expansion performs a search-and-replace operation upon the contents of parameter."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter,,pattern}")," Expand the value of parameter into all lowercase."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter,pattern}")," Expand the value of parameter, changing only the first character to lowercase."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter^^pattern}")," Expand the value of parameter into all uppercase letters."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"${parameter^pattern}")," Expand the value of parameter, changing only the first character to uppercase (capitalization)."),(0,i.kt)("h2",{id:"35--arrays"},"35 \u2013 Arrays"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"a[1]=foo\necho ${a[1]}\n\ndays=(Sun Mon Tue Wed Thu Fri Sat)\nfor i in ${days[@]}; do echo $i; done\n\necho ${#a[@]} # number of array elements\necho ${#a[100]} # length of element 100\n")),(0,i.kt)("p",null,"Bash allows you to reference element 0 of an array variable using scalar notation: instead of writing ",(0,i.kt)("inlineCode",{parentName:"p"},"${arr[0]}"),", you can write ",(0,i.kt)("inlineCode",{parentName:"p"},"$arr"),"; in other words: if you reference the variable as if it were a scalar, you get the element at index 0."),(0,i.kt)("p",null,"\u4f8b\u5982\uff1a",(0,i.kt)("inlineCode",{parentName:"p"},"${BASH_SOURCE[0]}")," \u7b49\u540c\u4e8e ",(0,i.kt)("inlineCode",{parentName:"p"},"$BASH_SOURCE")),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'#!/bin/zsh\n\n# Program to output a system information page\n\nPROGNAME="$(basename "$0")"\nTITLE="System Information Report For $HOSTNAME"\nCURRENT_TIME="$(date +"%x %r %Z")"\nTIMESTAMP="Generated $CURRENT_TIME, by $USER"\n\nreport_uptime() {\n    cat <<-_EOF_\n    <h2>System Uptime</h2>\n    <pre>$(uptime)</pre>\n_EOF_\n}\n\nreport_disk_space() {\n    cat <<-_EOF_\n    <h2>Disk Space Utilization</h2>\n    <pre>$(df -h)</pre>\n_EOF_\n}\n\nreport_home_space() {\n    local format="%8s%10s%10s\\n"\n    local i dir_list total_files total_dirs total_size user_name\n\n    if [[ "$(id -u)" -eq 0 ]]; then\n        dir_list=/home/*\n        user_name="All Users"\n    else\n        dir_list="$HOME/Downloads"\n        user_name="$USER"\n    fi\n\n    echo "<h2>Home Space Utilization ($user_name)</h2>"\n    for i in $dir_list; do\n        total_files="$(find "$i" -type f | wc -l)"\n        total_dirs="$(find "$i" -type d | wc -l)"\n        total_size="$(du -sh "$i" | cut -f 1)"\n\n        echo "<H3>$i</H3>"\n        echo "<pre>"\n        printf "$format" "Dirs" "Files" "Size"\n        printf "$format" "----" "-----" "----"\n        printf "$format" "$total_dirs" "$total_files" "$total_size"\n        echo "</pre>"\n    done\n}\n\nusage() {\n    echo "$PROGNAME: usage: $PROGNAME [-f file | -i]"\n    return\n}\n\nwrite_html_page() {\n    # Here Documents: \u597d\u5904\u662f\u53ef\u4ee5\u4efb\u610f\u4f7f\u7528\u53cc\u5f15\u53f7\u548c\u5355\u5f15\u53f7\n    # <<- will ignore leading tab characters (but not spaces) in the here document\n    cat <<_EOF_\n    <html>\n        <head>\n            <title>$TITLE</title>\n        </head>\n        <body>\n            <h1>$TITLE</h1>\n            <p>$TIMESTAMP</p>\n            $(report_uptime)\n            $(report_disk_space)\n            $(report_home_space)\n        </body>\n    </html>\n_EOF_\n}\n\n# process command line options\ninteractive=\nfilename=\n\nwhile [[ -n "$1" ]]; do\n    case "$1" in\n    -f | --file)\n        shift # \u79fb\u4f4d\uff0c\u4e0b\u4e00\u4e2a\u53c2\u6570\u624d\u662f\u771f\u6b63\u7684\u6587\u4ef6\u540d\n        filename="$1"\n        ;;\n    -i | --interactive)\n        interactive=1\n        ;;\n    -h | --help)\n        usage\n        exit\n        ;;\n    *)\n        usage >&2\n        exit 1\n        ;;\n    esac\n    shift\ndone\n\n# output html page\nif [[ -n "$filename" ]]; then\n    if touch "$filename" && [[ -f "$filename" ]]; then\n        write_html_page >"$filename"\n    else\n        echo "$PROGNAME: Cannot write file \'$filename\'" >&2\n        exit 1\n    fi\nelse\n    write_html_page\nfi\n')))}d.isMDXComponent=!0}}]);