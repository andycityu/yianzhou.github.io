<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-flutter docs-doc-id-flutter-widget">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Flutter Widget | yianzhou</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yianzhou.github.io/docs/flutter/flutter-widget"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-flutter-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-flutter-current"><meta data-rh="true" property="og:title" content="Flutter Widget | yianzhou"><meta data-rh="true" name="description" content="Bringing it all together"><meta data-rh="true" property="og:description" content="Bringing it all together"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yianzhou.github.io/docs/flutter/flutter-widget"><link data-rh="true" rel="alternate" href="https://yianzhou.github.io/docs/flutter/flutter-widget" hreflang="en"><link data-rh="true" rel="alternate" href="https://yianzhou.github.io/docs/flutter/flutter-widget" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6a91212d.css">
<link rel="preload" href="/assets/js/runtime~main.a5aed3a2.js" as="script">
<link rel="preload" href="/assets/js/main.71606d5f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="yianzhou" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="yianzhou" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">yianzhou</b></a><a class="navbar__item navbar__link" href="/docs/apple">Apple</a><a class="navbar__item navbar__link" href="/docs/dev">开发</a><a class="navbar__item navbar__link" href="/docs/language">编程语言</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/flutter">Flutter</a><a class="navbar__item navbar__link" href="/docs/insights">Insights</a><a class="navbar__item navbar__link" href="/docs/codes">Codes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yianzhou/yianzhou.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter/flutter-concurrency">Dart Concurrency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter/flutter-error">Flutter Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter/flutter-ffi">Flutter FFI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter/flutter-frameworks">Flutter Frameworks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter/flutter-gist">Flutter Gist</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter/flutter-news">Flutter News</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter">Flutter Primer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter/flutter-principle">Flutter Principle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/flutter/flutter-source">Flutter Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/flutter/flutter-widget">Flutter Widget</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/flutter/源码/flutter-channel">源码</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Flutter Widget</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Flutter Widget</h1><blockquote><p><a href="https://flutter.dev/docs/development/ui/widgets-intro#bringing-it-all-together" target="_blank" rel="noopener noreferrer">Bringing it all together</a></p><p><a href="https://www.youtube.com/playlist?list=PLjxrf2q8roU23XGwz3Km7sQZFTdB996iG" target="_blank" rel="noopener noreferrer">Flutter Widget of the Week</a></p><p><a href="https://www.youtube.com/playlist?list=PLOU2XLYxmsIJyiwUPCou_OVTpRIn_8UMd" target="_blank" rel="noopener noreferrer">Flutter Widget 101</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="widget-原理">Widget 原理<a href="#widget-原理" class="hash-link" aria-label="Direct link to Widget 原理" title="Direct link to Widget 原理">​</a></h2><p>In Flutter, almost everything is a widget.</p><p>Widgets are immutable and only exist until they need to be changed. 一旦创建就是不可变的，state 改变会导致销毁并重建。</p><p>Flutter’s widgets are lightweight, in part due to their immutability. Because they aren’t views themselves, and aren’t directly drawing anything, but rather are a <strong>description</strong> of the UI and its semantics that get “inflated” into actual view objects under the hood.</p><p>Implementing a stateful widget requires at least two classes: 1) a <code>StatefulWidget</code> class that creates an instance of 2) a <code>State</code> class. You might wonder why StatefulWidget and State are separate objects. In Flutter, these two types of objects have different life cycles. Widgets are temporary objects, used to construct a presentation of the application in its current state. State objects, on the other hand, are persistent between calls to <code>build()</code>, allowing them to remember information.</p><p>Calling <code>setState</code> marks this widget as dirty and schedules it to be rebuilt the next time your app needs to update the screen. By managing state in this way, you don’t need to write separate code for creating and updating child widgets. Instead, you simply implement the build function, which handles both situations.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="statelesswidget">StatelessWidget<a href="#statelesswidget" class="hash-link" aria-label="Direct link to StatelessWidget" title="Direct link to StatelessWidget">​</a></h2><div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&#x27;package:flutter/material.dart&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 给卡片视图加上阴影</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CardShadowContainer</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">StatelessWidget</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token class-name">CardShadowContainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token class-name">Key</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">child</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Widget</span><span class="token plain"> child</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Widget</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BuildContext</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Container</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      child</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> child</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      decoration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token class-name">BoxDecoration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        borderRadius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">BorderRadius</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token class-name">Radius</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">circular</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        boxShadow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token class-name">BoxShadow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Color</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fromRGBO</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.02</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 阴影颜色</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            offset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Offset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 阴影y轴偏移量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            blurRadius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 阴影模糊程度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spreadRadius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 阴影扩散程度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="widget-简介">Widget 简介<a href="#widget-简介" class="hash-link" aria-label="Direct link to Widget 简介" title="Direct link to Widget 简介">​</a></h2><p><code>MaterialApp</code> 作为根 Widget。</p><p><code>Scaffold</code> 是 Material Design 布局结构的基本实现，属性有 <code>appBar</code>, <code>floatingActionButton</code>, <code>drawer</code> 等。</p><p><code>Center</code> 会将它的 child 居中显示。</p><p><code>Container</code> 可设置宽高、圆角、margin、padding 的容器。属性有 <code>alignment</code>。</p><p><code>ListView</code> 线性排列它的 children 的可滑动组件。</p><ul><li><code>ListTile</code>: A single fixed-height row that typically contains some text as well as a leading or trailing icon.</li></ul><p><code>GridView</code>: A scrollable, 2D array of widgets.</p><p><code>Padding</code>: Fluttter 中很多 Widget 没有 padding 属性，可以用 <code>Padding</code>组件来实现内间距。</p><p><code>Row</code>, <code>Column</code>: 水平、垂直布局组件，几乎是最常用的组件。属性有 <code>mainAxisAlignment</code>, <code>crossAxisAlignment</code>。</p><ul><li><code>Expanded</code> 可以用在 <code>Row</code>, <code>Column</code>，属性有 <code>flex</code>。例：<code>Row</code> 里固定宽度 + 自适应的组合。</li><li><code>Flexible</code>: Flexible takes only the needed space, and Expanded takes all available space.</li><li><code>SizedBox</code> 可以用在 <code>Row</code>, <code>Column</code>，用于占位固定的宽/高。</li><li><code>Spacer</code> 可以用在 <code>Row</code>, <code>Column</code> 布局时加入可自适应的间隔。</li></ul><p><code>Row</code> 里面的 <code>Text</code> 超过一行怎么办？用 <code>Flexible</code> 包住 <code>Text</code></p><p><code>Stack</code> 将 children 都堆叠在一起。</p><ul><li><code>Align</code>：依附在 <code>Stack</code> 的某个方位。</li><li><code>Positioned</code>：灵活控制在 <code>Stack</code> 中的位置。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="widget-简介-2">Widget 简介 2<a href="#widget-简介-2" class="hash-link" aria-label="Direct link to Widget 简介 2" title="Direct link to Widget 简介 2">​</a></h2><p><a href="https://api.flutter.dev/flutter/material/InkWell-class.html" target="_blank" rel="noopener noreferrer"><code>InkWell</code></a>: A rectangular area of a Material that responds to touch.</p><p>实现透明度：In Flutter, most of the time you need to wrap a widget in an <code>Opacity</code> widget to accomplish this.</p><p><code>AspectRatio</code> 可以设置 child 的宽高比。</p><p><code>Card</code> 卡片效果。</p><p><code>Wrap</code>：<code>Row</code>, <code>Column</code> 是单行单列的，但 <code>Wrap</code> 可以突破这个限制，主轴空间不足时则向交叉轴扩展显示（即可以换行）。</p><p><code>FittedBox</code>: 类似 <code>UIView</code> 的 <code>contentMode</code></p><p><code>InheritedWidget</code>: Base class for widgets that efficiently propagate information down the tree. 例如：在控件树的叶子节点取根节点的信息。</p><p><a href="https://api.flutter.dev/flutter/widgets/Hero-class.html" target="_blank" rel="noopener noreferrer"><code>Hero</code></a>: A widget that marks its child as being a candidate for <a href="https://flutter.dev/docs/development/ui/animations/hero-animations" target="_blank" rel="noopener noreferrer">hero animations</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="按钮">按钮<a href="#按钮" class="hash-link" aria-label="Direct link to 按钮" title="Direct link to 按钮">​</a></h2><p><img loading="lazy" alt="img" src="/assets/images/224705A9-514D-4F3C-8780-E2C9F470D4AC-49ee703a7a5d6f3466573f0a886d4685.png" width="1209" height="406" class="img_ev3q"></p><p><code>RaisedButton</code> 已经弃用，请使用 <code>ElevatedButton</code>。</p><p><code>FlatButton</code>：扁平的按钮，已经弃用，请使用 <code>TextButton</code>。</p><p><code>OutlineButton</code>：线框按钮，已经弃用，请使用 <code>OutlinedButton</code>。</p><p><code>IconButton</code>：图标按钮</p><p><code>ButtonBar</code>：按钮组</p><p><code>FloatingActionButton</code>：浮动按钮</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="生命周期">生命周期<a href="#生命周期" class="hash-link" aria-label="Direct link to 生命周期" title="Direct link to 生命周期">​</a></h2><p><img loading="lazy" alt="img" src="/assets/images/flutter-stateful-widget-life-cycle-5eee47bc2a19356f458777770911ed31.png" width="640" height="347" class="img_ev3q"></p><p><code>State&lt;StatefulWidget&gt; createState ()</code> return state for this widget.</p><p><code>bool mounted</code> Whether this State object is currently in a tree. After createState and before calling initState, the framework &quot;mounts&quot; the State object by associating it with a BuildContext.</p><p><code>void initState ()</code> Called when this object is inserted into the tree. Subscribe to the object，for example a ChangeNotifier or Stream in this callback.</p><p><code>void didChangeDependencies ()</code> This method is also called immediately after <code>initState</code>. 它会在“依赖”发生变化时被 Flutter 框架调用。而这个“依赖”指的就是子 widget 是否使用了父 widget 中 <code>InheritedWidget</code> 的数据！比如当 <code>InheritedWidget</code> 的主题、颜色等发生变化时，子 widget 的 <code>didChangeDependencies</code> 方法将会被调用。</p><p><code>Widget build (BuildContext context)</code> This method can potentially be called in every frame and should not have any side effects beyond building a widget.</p><p><code>void didUpdateWidget (covariant T oldWidget)</code> If the parent widget rebuilds and request that this location in the tree update to display a new widget with the same runtimeType and Widget.key, the framework will update the widget property of this State object to refer to the new widget and then call this method with the previous widget as an argument.</p><p><code>void setState (VoidCallback fn)</code> Notify the framework that the internal state of this object has changed.</p><p><code>void deactivate ()</code> Called when this object is removed from the tree.</p><p><code>void dispose ()</code> Called when this object is removed from the tree permanently.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="widget-与-element">Widget 与 Element<a href="#widget-与-element" class="hash-link" aria-label="Direct link to Widget 与 Element" title="Direct link to Widget 与 Element">​</a></h2><blockquote><p><a href="https://www.bilibili.com/video/BV15k4y1B74z" target="_blank" rel="noopener noreferrer">Flutter 教程 Key-2 Widget 和 Element 的对应关系</a></p></blockquote><p>Widget 是不可变的，一旦被建立出来，就不可以在运行时改变。能够改变的是状态。</p><p><code>setState</code> 会触发 <code>Widget</code> 的 <code>build</code> 方法，重建一个新的 <code>Widget</code>，旧的会被抛弃掉，而不是在旧的基础上做修改。</p><p>新的 <code>Widget</code> 不断构建、旧的 <code>Widget</code> 不断废弃，能够在这个过程中被始终保存下来的，是状态。这就是为什么 <code>StatefulWidget</code> 要创建一个 <code>State</code> 对象。</p><p><img loading="lazy" alt="img" src="/assets/images/E9DAA63D-0572-4F51-B0F9-EC65939880A7-794bd90205f85cf20b9c21750b5c0fcb.png" width="2030" height="1086" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="widget-key">Widget Key<a href="#widget-key" class="hash-link" aria-label="Direct link to Widget Key" title="Direct link to Widget Key">​</a></h2><p>Widget 重建时比较两个东西 1. Widget 的类型；2. Key。</p><div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">packages/flutter/lib/src/widgets/framework.dart</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> bool </span><span class="token function" style="color:#d73a49">canUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Widget</span><span class="token plain"> oldWidget</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Widget</span><span class="token plain"> newWidget</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> oldWidget</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">runtimeType </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> newWidget</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">runtimeType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> oldWidget</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> newWidget</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Key</code> 有两个子类，<code>LocalKey</code> 针对同一级 Widget，<code>GlobalKey</code> 针对全局；尽量用 <code>LocalKey</code> 因为会快很多。</p><div class="mermaid" data-mermaid-src="classDiagram
    Key &lt;|-- LocalKey
    Key &lt;|-- GlobalKey
    LocalKey &lt;|-- ValueKey
    LocalKey &lt;|-- ObjectKey
    LocalKey &lt;|-- UniqueKey">classDiagram
    Key &lt;|-- LocalKey
    Key &lt;|-- GlobalKey
    LocalKey &lt;|-- ValueKey
    LocalKey &lt;|-- ObjectKey
    LocalKey &lt;|-- UniqueKey</div><p><code>GlobalKey</code> 主要有两种用法，一是让 Widget 在 Widget Tree 发生大幅改动的时候仍然保留状态；二是像 JavaScript 里面 <code>getElementById</code> 那样查找某个元素并得到它的各种信息。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="futurebuilder">FutureBuilder<a href="#futurebuilder" class="hash-link" aria-label="Direct link to FutureBuilder" title="Direct link to FutureBuilder">​</a></h2><blockquote><p><a href="https://www.bilibili.com/video/BV165411V7PS/?spm_id_from=pageDriver" target="_blank" rel="noopener noreferrer">Flutter 教程 Async-3 深入详解 FutureBuilder 组件</a></p></blockquote><div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">FutureBuilder</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSimpleFutureBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">FutureBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    future</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getDelayedAlice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    builder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BuildContext</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">AsyncSnapshot</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">dynamic</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> snapshot</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">snapshot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connectionState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// future 目前的状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">snapshot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// future 的数据（已完成的情况下）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">snapshot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// future 的错误（异常的情况下）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Container</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>FutureBuilder</code> 主要用于跟踪 <code>Future</code> 的变化并自动重绘。每次重绘时，<code>AsyncSnapshot</code> 会描述 <code>Future</code> 的最新动态。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="inheritedwidget">InheritedWidget<a href="#inheritedwidget" class="hash-link" aria-label="Direct link to InheritedWidget" title="Direct link to InheritedWidget">​</a></h2><div class="mermaid" data-mermaid-src="classDiagram
  Widget~abstract~ &lt;|-- ProxyWidget~abstract~
  ProxyWidget &lt;|-- InheritedWidget~abstract~">classDiagram
  Widget~abstract~ &lt;|-- ProxyWidget~abstract~
  ProxyWidget &lt;|-- InheritedWidget~abstract~</div><p><code>Widget</code>: Describes the configuration for an <code>Element</code>.</p><p><code>ProxyWidget</code>: A widget that has a child widget provided to it, instead of building a new widget.</p><p><code>InheritedWidget</code>: Base class for widgets that efficiently propagate information down the tree.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="changenotifier">ChangeNotifier<a href="#changenotifier" class="hash-link" aria-label="Direct link to ChangeNotifier" title="Direct link to ChangeNotifier">​</a></h2><div class="mermaid" data-mermaid-src="classDiagram
  Listenable~abstract~ &lt;|-- ChangeNotifier
  Listenable~abstract~ &lt;|-- ValueListenable~abstract~
  ChangeNotifier &lt;|-- ValueNotifier
  ValueListenable &lt;|-- ValueNotifier : implements

  Widget~abstract~ &lt;|-- StatefulWidget~abstract~
  StatefulWidget &lt;|-- AnimatedWidget~abstract~
  AnimatedWidget &lt;|-- AnimatedBuilder
  StatefulWidget &lt;|-- ValueListenableBuilder">classDiagram
  Listenable~abstract~ &lt;|-- ChangeNotifier
  Listenable~abstract~ &lt;|-- ValueListenable~abstract~
  ChangeNotifier &lt;|-- ValueNotifier
  ValueListenable &lt;|-- ValueNotifier : implements

  Widget~abstract~ &lt;|-- StatefulWidget~abstract~
  StatefulWidget &lt;|-- AnimatedWidget~abstract~
  AnimatedWidget &lt;|-- AnimatedBuilder
  StatefulWidget &lt;|-- ValueListenableBuilder</div><p><code>AnimatedBuilder</code>: Despite the name, <code>AnimatedBuilder</code> is not limited to <code>Animation</code>s. Any subtype of <code>Listenable</code> (such as <code>ChangeNotifier</code> and <code>ValueNotifier</code>) can be used with an <code>AnimatedBuilder</code> to rebuild only certain parts of a widget when the <code>Listenable</code> notifies its listeners. This technique is a performance improvement that allows rebuilding only specific widgets leaving others untouched.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="renderobjectwidget">RenderObjectWidget<a href="#renderobjectwidget" class="hash-link" aria-label="Direct link to RenderObjectWidget" title="Direct link to RenderObjectWidget">​</a></h2><div class="mermaid" data-mermaid-src="classDiagram
  Widget~abstract~ &lt;|-- RenderObjectWidget~abstract~
  RenderObjectWidget &lt;|-- LeafRenderObjectWidget~abstract~
  RenderObjectWidget &lt;|-- SingleChildRenderObjectWidget~abstract~
  RenderObjectWidget &lt;|-- MultiChildRenderObjectWidget~abstract~">classDiagram
  Widget~abstract~ &lt;|-- RenderObjectWidget~abstract~
  RenderObjectWidget &lt;|-- LeafRenderObjectWidget~abstract~
  RenderObjectWidget &lt;|-- SingleChildRenderObjectWidget~abstract~
  RenderObjectWidget &lt;|-- MultiChildRenderObjectWidget~abstract~</div><p><code>LeafRenderObjectWidget</code>: 用于没有子节点的 widget，通常基础组件都属于这一类，如 Image。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/flutter/flutter-source"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Flutter Source</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/flutter/源码/flutter-channel"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">FlutterChannels</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#widget-原理" class="table-of-contents__link toc-highlight">Widget 原理</a></li><li><a href="#statelesswidget" class="table-of-contents__link toc-highlight">StatelessWidget</a></li><li><a href="#widget-简介" class="table-of-contents__link toc-highlight">Widget 简介</a></li><li><a href="#widget-简介-2" class="table-of-contents__link toc-highlight">Widget 简介 2</a></li><li><a href="#按钮" class="table-of-contents__link toc-highlight">按钮</a></li><li><a href="#生命周期" class="table-of-contents__link toc-highlight">生命周期</a></li><li><a href="#widget-与-element" class="table-of-contents__link toc-highlight">Widget 与 Element</a></li><li><a href="#widget-key" class="table-of-contents__link toc-highlight">Widget Key</a></li><li><a href="#futurebuilder" class="table-of-contents__link toc-highlight">FutureBuilder</a></li><li><a href="#inheritedwidget" class="table-of-contents__link toc-highlight">InheritedWidget</a></li><li><a href="#changenotifier" class="table-of-contents__link toc-highlight">ChangeNotifier</a></li><li><a href="#renderobjectwidget" class="table-of-contents__link toc-highlight">RenderObjectWidget</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">粤ICP备15029205号 Copyright © 2023 yianzhou</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a5aed3a2.js"></script>
<script src="/assets/js/main.71606d5f.js"></script>
</body>
</html>