<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-audio-video">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">音视频基础知识 | yianzhou</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yianzhou.github.io/docs/apple/audio-video"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="音视频基础知识 | yianzhou"><meta data-rh="true" name="description" content="音视频素材下载："><meta data-rh="true" property="og:description" content="音视频素材下载："><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yianzhou.github.io/docs/apple/audio-video"><link data-rh="true" rel="alternate" href="https://yianzhou.github.io/docs/apple/audio-video" hreflang="en"><link data-rh="true" rel="alternate" href="https://yianzhou.github.io/docs/apple/audio-video" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6a91212d.css">
<link rel="preload" href="/assets/js/runtime~main.bdd1e9a6.js" as="script">
<link rel="preload" href="/assets/js/main.22616d99.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="yianzhou" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="yianzhou" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">yianzhou</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/apple">Apple</a><a class="navbar__item navbar__link" href="/docs/dev">开发</a><a class="navbar__item navbar__link" href="/docs/language">编程语言</a><a class="navbar__item navbar__link" href="/docs/flutter">Flutter</a><a class="navbar__item navbar__link" href="/docs/insights">Insights</a><a class="navbar__item navbar__link" href="/docs/codes">Codes</a><a class="navbar__item navbar__link" href="/docs/ai">AI</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yianzhou/yianzhou.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/SDWebImage">SDWebImage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/UIKit">UIKit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/afnetworking">AFNetworking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/app-extension">App Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/app-in-the-background">App in the Background</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/app-size">包体大小优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/app-startup">App Startup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/apple-bugs">Apple Bugs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/aspects">Aspects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/apple/audio-video">音视频基础知识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/avfoundation">AVFoundation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/cicd">CICD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/cocoapods">Cocoapods</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/core-animation">Core Animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/crash">崩溃</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple">Debug</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/frameworks">Frameworks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/graphics">图形渲染</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/hls">HTTP Live Streaming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/http">HTTP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/instruments">Instruments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/lag">卡顿</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/live-streaming">直播</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/llvm">LLVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/mach-o">Mach-O</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/matrix">Matrix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/memory">内存</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/metal">Metal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/multithread">多线程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/networking">Apple Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/performance">性能优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/semaphore">信号量</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/symbolic">符号化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/uiscene">UIScene</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/unified-logging">Unified Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/uniform-type-identifiers">Uniform Type Identifiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/user-notification">User Notification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/webkit">WebKit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/wwdc">WWDC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/wwdc23">WWDC23</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/xcassets">XCAssets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/xcode">Xcode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/xctest">XCTest</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/项目配置">项目配置</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">音视频基础知识</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>音视频基础知识</h1><p>音视频素材下载：</p><ul><li><a href="https://offers.adobe.com/en/na/audition/offers/audition_dlc/AdobeAuditionDLCSFX.html" target="_blank" rel="noopener noreferrer">Download Sound Effects</a></li><li><a href="https://www.pexels.com/videos/" target="_blank" rel="noopener noreferrer">The best free stock videos shared by the Pexels community.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="音频">音频<a href="#音频" class="hash-link" aria-label="Direct link to 音频" title="Direct link to 音频">​</a></h2><p>声音是一种波动的能量，主要用三个参数表征：频率（单位时间内的振动次数，单位为 Hz）、振幅（发声物体在震动时，偏离中心位置的幅度）、波形（声波的波形形状决定了声音的音色）。</p><p><img loading="lazy" alt="img-40" src="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6YjY4MzQxMTA5MDU1OTFmZDY1YzU3MTJlNmQwMjY4OTM1MTBiNjlmM2E5NzYyYjU4MjU3ZTFkOGE1OWNhNGY4NgpzaXplIDU4ODYK" class="img_ev3q"></p><p>当钢琴的键槌触及琴弦时，会产生特定频率和振幅的振动。振动的频率决定了声音的音调，低音符产生低而慢速的频率；高音符产生高而快速的频率。振动的振幅决定了声音的音量。琴弦的振动引起空气分子的碰撞并向四周传播，到达人耳时，带动耳膜以同样的频率和振幅振动；这些振动传递到内耳的耳蜗上，会转换成电信号传递给大脑。</p><p>人类可以听见的音频范围是 20 Hz - 20,000 Hz。</p><p>声音的数字化包括了三个基本过程：</p><p>一、采样：将麦克风转化过来的模拟电信号以某一频率进行离散化的样本采集。采样频率越高，音质越好。由于采样频率不够导致的采集波形与原始波形不够吻合，称为低频失真。根据 Nyquist 定理，采样频率至少是录制的最高频率的两倍，CD 录制的音频采样率为 44,100 Hz。</p><p>二、量化：将采集到的样本电压或电流值进行等级量化处理。量化深度越高，音质越好。量化深度一般用 bit 来衡量。CD 音质的量化深度是 16 bits，可以把纵坐标分成 2^16 = 65536 份。</p><p>三、编码：将量化值变换成二进制表示，并存储。单位时间内音频数据的比特容量，称为码率，也叫比特率 (bitrate)。用不同的编码方式进行编码，存储容量也不一样，解码所需要的时间也不一样。</p><p>脉冲编码调制 (Pulse Code Modulation, PCM) 是指将采样过程中收集的模拟信号数字化。LPCM (Linear Pulse Code Modulation)，指线性量化，即以固定的时间间隔对音频信号的强度进行采样、并数字化成二进制编码。经过 LPCM 采集到的音频数据是未经压缩的。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="图像">图像<a href="#图像" class="hash-link" aria-label="Direct link to 图像" title="Direct link to 图像">​</a></h2><p>光进入视觉通过以下 3 种形式：光源、透射光、反射光。人眼受到可见光谱范围内的刺激后，通过神经的传导，产生色彩的感觉。</p><p>图像的基本属性包括分辨率、颜色深度、颜色模型。</p><ul><li>分辨率</li><li>颜色深度：一幅图像中可使用的颜色数的最大值。目前的显示设备只能显示 RGB 色彩即 2^24 种颜色</li><li>颜色模型：RGB、CMYK、HSB、YUV（YIQ）、CIE Lab</li></ul><p>图像按照在计算机中显示时不同的生成方式，可以分为矢量图和点位图。矢量图转换为点位图采用光栅化技术 (Rasterizing)，点位图转换为矢量图用跟踪技术 (Tracing)。</p><p>在图像处理中，颜色通道是用来保存图像颜色信息的，RGB 图有 3 个颜色通道；Alpha 通道是用来保存选区的，将选区作为 8 位的灰度图像来保存。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="视频">视频<a href="#视频" class="hash-link" aria-label="Direct link to 视频" title="Direct link to 视频">​</a></h2><p>我们看到视频是因为人眼的视觉暂留特性。</p><p>电视的传输过程：将摄像机输出的 RGB 信号转换为 YUV 信号，传输后重新还原成 RGB 信号显示。</p><p>目前世界上流行的彩色电视制式 NTSC、PAL、SECAM，他们的主要区别是扫描频率、周期、颜色模型的不同。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="分辨率">分辨率<a href="#分辨率" class="hash-link" aria-label="Direct link to 分辨率" title="Direct link to 分辨率">​</a></h3><table><thead><tr><th>名称</th><th>分辨率</th></tr></thead><tbody><tr><td>HD</td><td>1,280 x 720</td></tr><tr><td>Full HD</td><td>1,920 x 1,080</td></tr><tr><td>2K</td><td>2,560 x 1,440</td></tr><tr><td>4K</td><td>3,840 x 2,160</td></tr><tr><td>8K (Ultra HD)</td><td>7,680 × 4,320</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="帧率">帧率<a href="#帧率" class="hash-link" aria-label="Direct link to 帧率" title="Direct link to 帧率">​</a></h3><p>NTSC：525 线，每秒 29.97 帧，隔行扫描。美国、日本等地使用。</p><p>PAL：625 线，每秒 25 帧，隔行扫描。中国、欧洲等地使用。</p><p>胶片电影 24 FPS、国内电视 25 FPS、新的数字电影 30 FPS 或者更高，我们不感觉卡顿，但玩游戏时，低于 60 FPS 我们就能感知到卡顿，这是为什么呢？</p><p>一、电影的每一帧是带有动态模糊的，它并不是静止的画面，而是快门一次开合的时间段内的成像，这也是为什么我们在给电影暂停、截图时，会出现动态模糊（比如风扇的扇叶）。而游戏的每一帧是由计算机渲染的，并不带有动态模糊。</p><p>二、电影的帧之间时间间隔是固定的，但游戏渲染不一定。根据画面的复杂程度，有可能会出现掉帧。</p><p>三、游戏的操作延迟会影响体验。游戏是需要交互的，鼠标、键盘等响应时间、加上计算机的运算时间、到显示到画面上，我们才能得到反馈。100 ms 左右的响应时间才能让玩家感觉到“即时性”。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="封装格式">封装格式<a href="#封装格式" class="hash-link" aria-label="Direct link to 封装格式" title="Direct link to 封装格式">​</a></h3><p>一个视频文件包含图像和音频，还有字幕、章节信息、元数据等，这些内容需要按照一定的规则组织起来，即封装。常见的封装格式有 MP4、FLV、AVI、MOV、MKV、3GP 等等。</p><p>流式封装：TS、FLV 等；索引封装：MP4、MOV、AVI 等。</p><p>封装格式之间的转换，只是换一个封装，不需要重新编码，音视频流可以完全复制，可以做到“秒转”格式。</p><table><thead><tr><th>封装格式</th><th>可容纳的<strong>视频编码格式</strong></th></tr></thead><tbody><tr><td>MP4</td><td>H.264, H.265, MPEG-4</td></tr><tr><td>AVI</td><td>MPEG-2, AC-1, H.264, DIVX, XVID</td></tr><tr><td>MOV</td><td>MPEG-2, XVID, H.264</td></tr><tr><td>WMV</td><td>WMV, AC-1</td></tr><tr><td>WebM</td><td>VP8, VP9</td></tr><tr><td>RM/RMVB</td><td>RV, RM</td></tr><tr><td>TS/PS</td><td>MPEG-2, H.264, MPEG-4</td></tr><tr><td>MKV</td><td>可封装所有的视频编码格式</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="码率">码率<a href="#码率" class="hash-link" aria-label="Direct link to 码率" title="Direct link to 码率">​</a></h3><p>单位时间内视频数据的比特容量，称为码率，也叫比特率 bitrate。</p><p>三种常见压制方式：CBR（固定码率）、VBR（可变码率）、CRF（固定质量）</p><table><thead><tr><th>压制方式</th><th>适用场景</th></tr></thead><tbody><tr><td>CBR</td><td>编码压力小，直播常用；画面变化很大时，画质会很低。是空间利用率最低的码率选项。</td></tr><tr><td>VBR</td><td>画面变化小的场景码率低，画面变化大的场景码率高。</td></tr><tr><td>CRF</td><td>以观感画质为目标，码率、文件大小不可预期。</td></tr></tbody></table><p>相同的码率下，花更多的时间压制（编码）视频，压缩率就越高，画质就会越好。在直播场景下，必须保证视频压制的速度，大于 60 帧每秒，才不会出现掉帧。处理非直播的视频时，可以用更多的编码时间，换取高压缩率和高画质。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="视频压缩">视频压缩<a href="#视频压缩" class="hash-link" aria-label="Direct link to 视频压缩" title="Direct link to 视频压缩">​</a></h3><p>H.264 是 Motion Picture Experts Group (MPEG) 定义的 MPEG-4 的一部分。是目前最常见的视频编码格式。以 H.264 为例，视频压缩是帧内压缩（消除空间维度的冗余信息）和帧间压缩（消除时间维度的冗余信息）的结合。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="帧内压缩">帧内压缩<a href="#帧内压缩" class="hash-link" aria-label="Direct link to 帧内压缩" title="Direct link to 帧内压缩">​</a></h4><p>帧内压缩就是把每一帧的图像有损压缩。图像压缩的原理，是人眼对于亮度的分辨能力，比对于色度的分辨能力要高得多。</p><p>一张 RGB 图片，1280<!-- -->*<!-- -->720，每个像素需要记录 RGB 颜色信息，每种颜色范围是 0-255，需要 8 bit，也就是一个字节，一个像素点就需要 3 个字节。那么所需的存储空间是 1280<!-- -->*<!-- -->720<!-- -->*<!-- -->3/1024/1024 = 2.63 MB。</p><p>视频数据是使用 YCbCr 颜色模式的典型案例。YCbCr 也称 YUV，虽然 YUV 并不十分准确，但是读起来比 YCbCr 好读。YCbCr 中，Y 表示明度、C 就是 Chrominance 色度。Cb 就是 blue 和 green 的色度。Cr 就是 red 和 green 的色度。</p><p>YCrCb 与 YUV 的定义是相同的。YUV 适用于 PAL 和 SECAM 彩色电视制式的模拟视频图像表示，YCrCb 适用于数字电视和计算机数字视频图像的表示。</p><p>YUV 采用明亮度和色度来表示像素的颜色。Y 表示明度（Luminance），U 和 V 表示色度（Chrominance），色度包括色调和饱和度。</p><p>和 RGB 类似，YUV 图像的每个像素点都包括了 YUV 分量，但不同的是，它的 Y 和 UV 分量是可以分离的。只有 Y 分量也可以显示一个图像，只不过是黑白的。根据不同的采样格式，可以若干个 Y 分量共用一个 UV 分量。这种减少颜色数据的过程称为色彩二次抽样。</p><ul><li>YUV 4:4:4 YUV 三个分量的采样比例相同，每个像素的三个分量信息都是 8 bit，与 RGB 占用空间一样。</li><li>YUV 4:2:2 Y 和 UV 按照 2:1 的比例采样。每个像素点都采集 Y 分量，每两个像素点采集一个 UV 分量。两个像素点共用一个 UV 分量。</li><li>YUV 4:2:0 （业界常用的）第一行扫描时，YU 按照 2:1 采样；第二行扫描时，YV 按照 2:1 采样。四个像素点共用一个 UV 分量。</li></ul><p><img loading="lazy" alt="img" src="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6NWNlYTRkY2VlOTVhMzQ1YTIxOGE0NTAzOWU5ODUxODM0MzMwNTk1ZGU3NTQxOGQzODU5MTQwNTEyNTcwYTBhYQpzaXplIDM2ODYK" class="img_ev3q"></p><p>以上图为例，按照 4:4:4 采样收集到的信息为：</p><div class="language-s codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-s codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Y0, U0, V0], [Y1, U1, V1], [Y2, U2, V2], [Y3, U3, V3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Y5, U5, V5], [Y6, U6, V6], [Y7, U7, V7], [Y8, U8, V8]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>按照 4:2:0 时，第一行 Y 和 U 按照 2:1 采样；第二行 Y 和 V 按照 2:1 采样，收集的信息为：</p><div class="language-s codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-s codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Y0, U0], [Y1], [Y2, U2], [Y3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Y5, V5], [Y6], [Y7, V7], [Y8]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用 YUV 模型一是为了兼容黑白电视；二是利用人眼对彩色细节的分辨率远低于对亮度细节的分辨率，压缩图像以减少存储容量和传输大小。由于现在所有的显示器都采用 RGB 值来驱动，这就要求在显示每个像素之前，需要把 YUV 分量值转换成 RGB 值。</p><p>一个未压缩过的视频，仅仅是通过帧内压缩，就可以减小 90%+ 的体积！</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="帧间压缩">帧间压缩<a href="#帧间压缩" class="hash-link" aria-label="Direct link to 帧间压缩" title="Direct link to 帧间压缩">​</a></h4><p>帧间压缩一般是无损的。</p><p>I 帧：关键帧，记录完整图像的一帧。解压后就是一张单独的完整的图片。</p><p>P 帧：只存储画面变化的信息。无变化的宏块，直接复用；有变化的宏块，记录下变化信息。解码时，参考前面的 I 帧或 P 帧，叠加变化信息，形成完整画面。</p><p>B 帧：双向预测帧。参考前后的帧来生成一个完整的画面。几乎不需要存储空间，但其解压过程会耗费较长时间。直播流中通常会放弃 B 帧，原因就是 B 帧需要向后预测，会延长直播的时延。</p><p>原始帧之间的变化越大，越难“预测”。</p><p>GOP (Group of Pictures)：每一组 IPB 的序列包含了多少帧。同码率下，GOP 值越大，B 帧和 P 帧越多，视频质量越高。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/yianzhou/yianzhou.github.io/docs/apple/audio-video.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/apple/aspects"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Aspects</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/apple/avfoundation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">AVFoundation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#音频" class="table-of-contents__link toc-highlight">音频</a></li><li><a href="#图像" class="table-of-contents__link toc-highlight">图像</a></li><li><a href="#视频" class="table-of-contents__link toc-highlight">视频</a><ul><li><a href="#分辨率" class="table-of-contents__link toc-highlight">分辨率</a></li><li><a href="#帧率" class="table-of-contents__link toc-highlight">帧率</a></li><li><a href="#封装格式" class="table-of-contents__link toc-highlight">封装格式</a></li><li><a href="#码率" class="table-of-contents__link toc-highlight">码率</a></li><li><a href="#视频压缩" class="table-of-contents__link toc-highlight">视频压缩</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">粤ICP备15029205号 Copyright © 2024 yianzhou</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bdd1e9a6.js"></script>
<script src="/assets/js/main.22616d99.js"></script>
</body>
</html>