<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-底层原理/crash">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">崩溃 | yianzhou</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yianzhou.github.io/docs/apple/底层原理/crash"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="崩溃 | yianzhou"><meta data-rh="true" name="description" content="iOS Crash Dump Analysis, Second Edition"><meta data-rh="true" property="og:description" content="iOS Crash Dump Analysis, Second Edition"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yianzhou.github.io/docs/apple/底层原理/crash"><link data-rh="true" rel="alternate" href="https://yianzhou.github.io/docs/apple/底层原理/crash" hreflang="en"><link data-rh="true" rel="alternate" href="https://yianzhou.github.io/docs/apple/底层原理/crash" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6a91212d.css">
<link rel="preload" href="/assets/js/runtime~main.315de13f.js" as="script">
<link rel="preload" href="/assets/js/main.85e1ecac.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="yianzhou" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="yianzhou" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">yianzhou</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/apple">Apple</a><a class="navbar__item navbar__link" href="/docs/dev">开发</a><a class="navbar__item navbar__link" href="/docs/language">编程语言</a><a class="navbar__item navbar__link" href="/docs/flutter">Flutter</a><a class="navbar__item navbar__link" href="/docs/insights">Insights</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yianzhou/yianzhou.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/Frameworks/SDWebImage">Frameworks</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/apple-bugs">Apple Bugs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple">Debug</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/uniform-type-identifiers">Uniform Type Identifiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/wwdc">WWDC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/xcode">Xcode</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/代码/file">代码</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/工具/app-size">工具</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/工程/frameworks">工程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/apple/底层原理/app-launch">底层原理</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/底层原理/app-launch">启动时长优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/apple/底层原理/crash">崩溃</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/底层原理/lag">卡顿</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/底层原理/llvm">LLVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/底层原理/memory">内存优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/底层原理/multithread">多线程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/底层原理/performance">性能优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/底层原理/semaphore">信号量</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/网络/afnetworking">网络</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/音视频、图形/audio-video">音视频、图形</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">底层原理</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">崩溃</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>崩溃</h1><p><a href="https://faisalmemon.github.io/ios-crash-dump-analysis-book/en/" target="_blank" rel="noopener noreferrer">iOS Crash Dump Analysis, Second Edition</a></p><blockquote><p><a href="https://developer.apple.com/documentation/xcode/diagnosing-issues-using-crash-reports-and-device-logs" target="_blank" rel="noopener noreferrer">Diagnosing Issues Using Crash Reports and Device Logs</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="exception-types">Exception Types<a href="#exception-types" class="hash-link" aria-label="Direct link to Exception Types" title="Direct link to Exception Types">​</a></h2><blockquote><p><a href="https://developer.apple.com/documentation/xcode/diagnosing_issues_using_crash_reports_and_device_logs/understanding_the_exception_types_in_a_crash_report?language=objc" target="_blank" rel="noopener noreferrer">Understanding the Exception Types in a Crash Report</a></p></blockquote><p>苹果官方已经有明确的崩溃分类了，我们收集上来的崩溃也是按照以下类型来分类的，这些异常类型定义在 <code>mach/exception_types.h</code> 里。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="exc_breakpoint-sigtrap">EXC_BREAKPOINT (SIGTRAP)<a href="#exc_breakpoint-sigtrap" class="hash-link" aria-label="Direct link to EXC_BREAKPOINT (SIGTRAP)" title="Direct link to EXC_BREAKPOINT (SIGTRAP)">​</a></h3><p>The breakpoint exception type indicates a trace trap interrupted the process. A trace trap gives an attached debugger the chance to interrupt the process at a specific point in its execution. 断点调试</p><p>The Swift runtime uses trace traps for specific types of unrecoverable errors. Swift 强解包或强转类型。</p><p>Some lower-level libraries, such as Dispatch, trap the process with this exception upon encountering an unrecoverable error. 底层库例如 Dispatch 遇到的不可恢复的错误。</p><p>On x86_64 processors, this appears as EXC_BAD_INSTRUCTION (SIGILL).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="exc_bad_access-sigsegv">EXC_BAD_ACCESS (SIGSEGV)<a href="#exc_bad_access-sigsegv" class="hash-link" aria-label="Direct link to EXC_BAD_ACCESS (SIGSEGV)" title="Direct link to EXC_BAD_ACCESS (SIGSEGV)">​</a></h3><p>This is an execute bad access exception, the segment violation signal. A crash due to a memory access issue occurs when an app uses memory in an unexpected way. Memory access problems have numerous causes, such as dereferencing a pointer to an invalid memory address, jumping to an instruction at an invalid address, or writing to read-only memory.</p><p><code>EXC_BAD_ACCESS</code> 崩溃时还会带有一个错误码，定义在 <code>mach/kern_return.h</code> 里。最常见的就是以下两种：</p><ul><li><code>KERN_INVALID_ADDRESS</code>. Specified address is not currently valid.</li><li><code>KERN_PROTECTION_FAILURE</code>. Specified memory is valid, but does not permit the required forms of access.</li></ul><p>代码复现：</p><div class="language-objc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">memcpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// code=1, address=0x0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">NSLog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">@&quot;%@&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// code=1, address=0x1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="img" src="/assets/images/C93290DE-203F-4B7F-A300-6C68D207C142-5f7e428e4af7568a6d9c8e3e70f6508d.png" width="1440" height="264" class="img_ev3q"></p><p>See <a href="#memory-errors">Memory Errors</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="exc_crash-sigabrt">EXC_CRASH (SIGABRT)<a href="#exc_crash-sigabrt" class="hash-link" aria-label="Direct link to EXC_CRASH (SIGABRT)" title="Direct link to EXC_CRASH (SIGABRT)">​</a></h3><p>EXC_CRASH (SIGABRT) indicates the process terminated because it received the SIGABRT signal. Typically, this signal is sent because a function in the process called <code>abort()</code>, such as when an app encounters an uncaught Objective-C or C++ <strong>language exception</strong>.</p><p>Language exceptions, such as those from Objective-C, indicate programming errors discovered at runtime, such as accessing an array with an index that’s out-of-bounds or not implementing a required method of a protocol. 数组越界、方法未实现。</p><p>If the API throwing the exception is <code>doesNotRecognizeSelector:</code>, the crash may be due to a zombie object. See <a href="https://developer.apple.com/documentation/xcode/diagnosing_issues_using_crash_reports_and_device_logs/identifying_the_cause_of_common_crashes/investigating_crashes_for_zombie_objects?language=objc" target="_blank" rel="noopener noreferrer">Investigating Crashes for Zombie Objects</a> for additional information.</p><p>When an <strong>app extension</strong> takes too much time to initialize, the operating system sends a SIGABRT to the app extension process. These crashes include an Exception Subtype field with the value LAUNCH_HANG.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="exc_crash-sigkill">EXC_CRASH (SIGKILL)<a href="#exc_crash-sigkill" class="hash-link" aria-label="Direct link to EXC_CRASH (SIGKILL)" title="Direct link to EXC_CRASH (SIGKILL)">​</a></h3><p>EXC_CRASH (SIGKILL) indicates the operating system terminated the process. The crash report contains a Termination Reason field with a code that explains the reason for the crash. 被系统杀死，有异常编码！</p><ul><li>0x8badf00d (pronounced “ate bad food”). The operating system’s watchdog terminated the app. See Addressing Watchdog Terminations. App 太久无响应而被 watchdog 杀掉！</li><li>0xdead10cc (pronounced “dead lock”). The operating system terminated the app because it held on to a file lock or SQLite database lock during suspension. 死锁！</li><li>0xc00010ff (pronounced “cool off”). 设备过热！</li><li>0xbaadca11 (pronounced “bad call”). The operating system terminated the app for failing to report a CallKit call in response to a PushKit notification.</li><li>0xbad22222. The operating system terminated a VoIP application because it resumed too frequently.</li></ul><p>watchOS 专用的异常编码：</p><ul><li>0xc51bad01. watchOS terminated the app because it used too much CPU time while performing a background task.</li><li>0xc51bad02. watchOS terminated the app because it failed to complete a background task within the allocated time.</li><li>0xc51bad03. The system was sufficiently busy overall that the app may not have received much CPU time to perform the background task.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="exc_crash-sigquit">EXC_CRASH (SIGQUIT)<a href="#exc_crash-sigquit" class="hash-link" aria-label="Direct link to EXC_CRASH (SIGQUIT)" title="Direct link to EXC_CRASH (SIGQUIT)">​</a></h3><p>EXC_CRASH (SIGQUIT) indicates the process terminated at the request of another process with privileges to manage its lifetime.（例如：宿主进程拥有特权可以管理键盘进程的生命周期）SIGQUIT doesn’t mean that the process crashed, but it likely misbehaved in a detectable manner.</p><p>With iOS and iPadOS keyboard extensions, the host app terminates the keyboard extension if it takes too long to load. 键盘进程被宿主进程杀死！</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="exc_guard">EXC_GUARD<a href="#exc_guard" class="hash-link" aria-label="Direct link to EXC_GUARD" title="Direct link to EXC_GUARD">​</a></h3><p>EXC_GUARD indicates the process violated a guarded resource protection. Although there are multiple types of guarded system resources, most guarded resource crashes are from guarded file descriptors. 大部分是由于操作文件句柄不当！</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="exc_resource">EXC_RESOURCE<a href="#exc_resource" class="hash-link" aria-label="Direct link to EXC_RESOURCE" title="Direct link to EXC_RESOURCE">​</a></h3><p>EXC_RESOURCE is a notification from the operating system that the process exceeded a resource consumption limit.</p><ul><li>CPU and CPU_FATAL. A thread in the process used too much CPU over a short period of time.</li><li>MEMORY. The process crossed a memory limit imposed by the system.</li><li>IO. The process caused an excessive amount of disk writes over a short period of time.</li><li>WAKEUPS. Threads in the process woke up too many times per second, which consumes battery life. Thread-to-thread communication APIs, such as <code>performSelector:onThread:withObject:waitUntilDone:</code>, or <code>dispatch_async</code>, cause this when unwittingly called far more often than expected. 线程过于频繁被唤起。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="memory-errors">Memory Errors<a href="#memory-errors" class="hash-link" aria-label="Direct link to Memory Errors" title="Direct link to Memory Errors">​</a></h2><blockquote><p><a href="https://developer.apple.com/documentation/xcode/diagnosing_issues_using_crash_reports_and_device_logs/identifying_the_cause_of_common_crashes/investigating_memory_access_crashes?language=objc" target="_blank" rel="noopener noreferrer">Investigating Memory Access Crashes</a></p></blockquote><p><code>EXC_BAD_ACCESS</code> 最常见的情况就是野指针（向一个已经释放的对象发送消息），从操作系统的层面说，当对象被释放后，它在虚拟内存空间中的内存块，可能被回收、复写，这时再对它进行访问就是非法的。</p><p>Once an Objective-C or Swift object no longer has any strong references to it, the object is deallocated. Attempting to further send messages to the object as if it were still a valid object is a “use after free” issue, with the deallocated object still receiving messages called a <strong>zombie object</strong>.</p><blockquote><p><a href="https://developer.apple.com/videos/play/wwdc2018/414/" target="_blank" rel="noopener noreferrer">WWDC 2018 - Understanding Crashes and Crash Logs</a></p></blockquote><p><img loading="lazy" alt="img" src="/assets/images/7b28d32a-f07b-4ab7-907c-f9422132fd53-5686ac0b191993ff6e77b5a938175611.png" width="2560" height="1434" class="img_ev3q"></p><p>这是一个向已释放的对象发送消息的例子。如何看出来的呢？This particular bad value &quot;0x7fdd5e70700&quot; looks like it&#x27;s inside the address range for the malloc memory allocator (0x7fdd5e400000 - 0x7fdd5e800000), but it&#x27;s been <strong>shifted/rotated by 4 bits</strong>.（转换成二进制、再移位运算，可用系统计算器操作验证）</p><blockquote><p>Bit Rotation: A rotation (or circular shift) is an operation similar to shift except that the bits that fall off at one end are put back to the other end. In left rotation, the bits that fall off at left end are put back at right end. In right rotation, the bits that fall off at right end are put back at left end.</p></blockquote><p>对象是如何被释放的：When the free function deletes an object it inserts it into a free list of other dead objects. It writes a rotated pointer into the object&#x27;s <code>isa</code> field to make sure that the value written there is not a valid memory address precisely so that bad use of the object will crash.</p><p>当这个已被释放的对象再次被发送消息时，它的 <code>isa</code> 指针地址是一个被旋转了的、非法的指针地址，就会触发崩溃。The memory allocator did that for us, it deliberately rotated that pointer to make sure we would crash if we tried to use it again.</p><p>那么能否找到是 <code>LoginViewController</code> 的哪个属性接收了 <code>objc_release</code> 消息导致崩溃呢？We can see a +42 where the file and line number would&#x27;ve been. And the +42 is our clue because the +42 is an offset in the assembly code of the function. We can use lldb. We can find the address of the ivar destroyer function &quot;0x1000022ea&quot; and disassemble it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unrecognized-selector">Unrecognized Selector<a href="#unrecognized-selector" class="hash-link" aria-label="Direct link to Unrecognized Selector" title="Direct link to Unrecognized Selector">​</a></h3><div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Application Specific Information:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** Terminating app due to uncaught exception &#x27;NSInvalidArgumentException&#x27;, reason:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;-[NSURL _isResizable]: unrecognized selector sent to instance 0x280742c40&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Another common memory error symptom is an unrecognized selector exception. These are often caused when you have an object of some type, a code that is using that object, and then the object gets deallocated and used again. It sounds like that we will get what we saw in that previous crash log - malloc free list signature. But in this case, a new object is allocated at the same address where the old object used to be. So when the code tries to call a function on the old object, we have a different object of a different type at that same address and it doesn&#x27;t recognize that function at all and we get an unrecognized selector exception.</p><div class="language-objc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token plain"> performSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">@selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">forceToCloseXxxx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过给 <code>NSObject</code> 添加分类，介入<strong>消息转发流程</strong>，可以应对这种崩溃。<a href="https://github.com/jasenhuang/NSObjectSafe" target="_blank" rel="noopener noreferrer">NSObjectSafe</a> 有相关实现。</p><div class="language-objc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">load </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> dispatch_once_t onceToken</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">dispatch_once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">onceToken</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">^</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">swizzleInstanceMethod</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSObject class</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">@selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">methodSignatureForSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">@selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hookMethodSignatureForSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">swizzleInstanceMethod</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSObject class</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">@selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">forwardInvocation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">@selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hookForwardInvocation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="debug-tools">Debug Tools<a href="#debug-tools" class="hash-link" aria-label="Direct link to Debug Tools" title="Direct link to Debug Tools">​</a></h3><p>Xcode contains a suite of debugging tools you can use to identify memory access issues as your app runs:</p><ul><li><strong>Address Sanitizer</strong> for memory corruption bugs</li><li>Undefined Behavior Sanitizer</li><li><strong>Thread Sanitizer</strong> for multithreading problems</li></ul><p>For difficult-to-diagnose memory access crashes, the malloc debugging features, such as <strong>Guard Malloc</strong>, can help.</p><p>You enable these tools through the Xcode scheme editor.</p><p><img loading="lazy" alt="img" src="/assets/images/00EB4311-ABEE-4DFD-A9E5-9885978821E8-b2f8dfed10f0e17a22c66fbf6492827c.png" width="1832" height="990" class="img_ev3q"></p><p>If your app contains code in Objectice-C, C, or C++, run the static analyzer, and fix all issues it discovers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="常见崩溃原因">常见崩溃原因<a href="#常见崩溃原因" class="hash-link" aria-label="Direct link to 常见崩溃原因" title="Direct link to 常见崩溃原因">​</a></h2><ul><li>野指针：向已经释放的对象发送消息</li><li>给数组或集合添加 nil、字典的 key 为 nil</li><li>数组越界</li><li>在子线程中进行 UI 更新可能会发生崩溃</li><li>多线程问题：多个线程进行数据的读取操作，比如有一个线程在置空数据的同时另一个线程在读取这个数据，可能会出现崩溃情况</li><li>主线程卡顿/无响应：如果主线程超过系统规定的时间无响应，就会被 Watchdog 杀掉</li><li>内存消耗过高（OOM）</li><li>后台任务超时</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="崩溃监控工具">崩溃监控工具<a href="#崩溃监控工具" class="hash-link" aria-label="Direct link to 崩溃监控工具" title="Direct link to 崩溃监控工具">​</a></h2><ol><li>Xcode - Organizer。</li><li>利用开源框架收集堆栈信息，自己部署服务器监控。如 <a href="https://github.com/microsoft/plcrashreporter" target="_blank" rel="noopener noreferrer">PLCrashReporter</a> 和 <a href="https://github.com/kstenerud/KSCrash" target="_blank" rel="noopener noreferrer">KSCrash</a>。</li><li>友盟、Firebase、Bugly，提供集成 SDK 及分析服务。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="捕获崩溃">捕获崩溃<a href="#捕获崩溃" class="hash-link" aria-label="Direct link to 捕获崩溃" title="Direct link to 捕获崩溃">​</a></h2><p>示例代码：<a href="https://github.com/Haley-Wong/RunLoopDemos/tree/master/RunLoopDemo04/RunLoopDemo04" target="_blank" rel="noopener noreferrer">https://github.com/Haley-Wong/RunLoopDemos/tree/master/RunLoopDemo04/RunLoopDemo04</a></p><div class="language-objc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">setCatchExceptionHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 1.捕获一些异常导致的崩溃</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">NSSetUncaughtExceptionHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">HandleException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 2.捕获非异常情况，通过 signal 传递出来的崩溃</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIGSEGV</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSignalException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIGFPE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSignalException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIGBUS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSignalException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIGPIPE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSignalException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIGHUP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSignalException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIGINT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSignalException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIGQUIT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSignalException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIGABRT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSignalException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIGILL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleSignalException</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>捕获方法目前只可以执行一次，下次触发崩溃后，会跳过捕获方法，直接崩溃。</p><div class="language-objc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">handleException</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NSException </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 崩溃信息记录、上传</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 回到程序主页面，“起死回生”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 强制运行 RunLoop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="crash-report">Crash Report<a href="#crash-report" class="hash-link" aria-label="Direct link to Crash Report" title="Direct link to Crash Report">​</a></h2><blockquote><p><a href="https://developer.apple.com/videos/play/wwdc2016/720/?time=257" target="_blank" rel="noopener noreferrer">WWDC 2016 - Concurrent Programming With GCD in Swift 3</a></p></blockquote><p><img loading="lazy" alt="img" src="/assets/images/2f5c3f44-66b4-464a-9e0c-a1f94ac23d4a-7a291714d6a2324af05fe0d760d4fced.png" width="2560" height="1316" class="img_ev3q"></p><blockquote><p><a href="https://developer.apple.com/videos/play/wwdc2018/414/" target="_blank" rel="noopener noreferrer">WWDC 2018 - Understanding Crashes and Crash Logs</a></p></blockquote><p>And if you upload an app that contains bitcode you should use the &quot;Xcode - Organizer - Archives - Download Debug Symbols&quot; to download any dSYMs that come from a store-side bitcode compilation.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/yianzhou/yianzhou.github.io/docs/apple/底层原理/crash.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/apple/底层原理/app-launch"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">启动时长优化</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/apple/底层原理/lag"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">卡顿</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#exception-types" class="table-of-contents__link toc-highlight">Exception Types</a><ul><li><a href="#exc_breakpoint-sigtrap" class="table-of-contents__link toc-highlight">EXC_BREAKPOINT (SIGTRAP)</a></li><li><a href="#exc_bad_access-sigsegv" class="table-of-contents__link toc-highlight">EXC_BAD_ACCESS (SIGSEGV)</a></li><li><a href="#exc_crash-sigabrt" class="table-of-contents__link toc-highlight">EXC_CRASH (SIGABRT)</a></li><li><a href="#exc_crash-sigkill" class="table-of-contents__link toc-highlight">EXC_CRASH (SIGKILL)</a></li><li><a href="#exc_crash-sigquit" class="table-of-contents__link toc-highlight">EXC_CRASH (SIGQUIT)</a></li><li><a href="#exc_guard" class="table-of-contents__link toc-highlight">EXC_GUARD</a></li><li><a href="#exc_resource" class="table-of-contents__link toc-highlight">EXC_RESOURCE</a></li></ul></li><li><a href="#memory-errors" class="table-of-contents__link toc-highlight">Memory Errors</a><ul><li><a href="#unrecognized-selector" class="table-of-contents__link toc-highlight">Unrecognized Selector</a></li><li><a href="#debug-tools" class="table-of-contents__link toc-highlight">Debug Tools</a></li></ul></li><li><a href="#常见崩溃原因" class="table-of-contents__link toc-highlight">常见崩溃原因</a></li><li><a href="#崩溃监控工具" class="table-of-contents__link toc-highlight">崩溃监控工具</a></li><li><a href="#捕获崩溃" class="table-of-contents__link toc-highlight">捕获崩溃</a></li><li><a href="#crash-report" class="table-of-contents__link toc-highlight">Crash Report</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">粤ICP备15029205号 Copyright © 2023 yianzhou</div></div></div></footer></div>
<script src="/assets/js/runtime~main.315de13f.js"></script>
<script src="/assets/js/main.85e1ecac.js"></script>
</body>
</html>