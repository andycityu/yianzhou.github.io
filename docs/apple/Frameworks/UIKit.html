<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Frameworks/UIKit">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">UIKit | yianzhou</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yianzhou.github.io/docs/apple/Frameworks/UIKit"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="UIKit | yianzhou"><meta data-rh="true" name="description" content="UIResponder 及其所有子类，以及任何操纵用户界面的行为，都要在主线程进行，见 Apple Developer Documentation。"><meta data-rh="true" property="og:description" content="UIResponder 及其所有子类，以及任何操纵用户界面的行为，都要在主线程进行，见 Apple Developer Documentation。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yianzhou.github.io/docs/apple/Frameworks/UIKit"><link data-rh="true" rel="alternate" href="https://yianzhou.github.io/docs/apple/Frameworks/UIKit" hreflang="en"><link data-rh="true" rel="alternate" href="https://yianzhou.github.io/docs/apple/Frameworks/UIKit" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6a91212d.css">
<link rel="preload" href="/assets/js/runtime~main.217ba8b0.js" as="script">
<link rel="preload" href="/assets/js/main.6346b9aa.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="yianzhou" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="yianzhou" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">yianzhou</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/apple">Apple</a><a class="navbar__item navbar__link" href="/docs/dev">开发</a><a class="navbar__item navbar__link" href="/docs/language">编程语言</a><a class="navbar__item navbar__link" href="/docs/flutter">Flutter</a><a class="navbar__item navbar__link" href="/docs/insights">Insights</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yianzhou/yianzhou.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/apple/Frameworks/SDWebImage">Frameworks</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/Frameworks/SDWebImage">SDWebImage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/apple/Frameworks/UIKit">UIKit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/Frameworks/app-extension">App Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/Frameworks/app-in-the-background">App in the Background</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/Frameworks/aspects">Aspects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/Frameworks/matrix">Matrix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/Frameworks/uiscene">UIScene</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/Frameworks/unified-logging">Unified Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apple/Frameworks/user-notification">User Notification</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/apple-bugs">Apple Bugs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple">Debug</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/uniform-type-identifiers">Uniform Type Identifiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/wwdc">WWDC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/apple/xcode">Xcode</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/代码/file">代码</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/工具/app-size">工具</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/工程/frameworks">工程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/底层原理/app-launch">底层原理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/网络/afnetworking">网络</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/apple/音视频、图形/audio-video">音视频、图形</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Frameworks</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">UIKit</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>UIKit</h1><p><code>UIResponder</code> 及其所有子类，以及任何操纵用户界面的行为，都要在主线程进行，见 <a href="https://developer.apple.com/documentation/uikit" target="_blank" rel="noopener noreferrer">Apple Developer Documentation</a>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="iphone-x-screen">iPhone X Screen<a href="#iphone-x-screen" class="hash-link" aria-label="Direct link to iPhone X Screen" title="Direct link to iPhone X Screen">​</a></h2><p><a href="https://ivomynttinen.com/blog/ios-design-guidelines" target="_blank" rel="noopener noreferrer">The iOS Design Guidelines - Ivo Mynttinen / User Interface Designer</a></p><p><img loading="lazy" alt="img" src="/assets/images/9FDB6B08-1A6B-459A-9AA4-FD62B9973BA3-c0425e3aee3f6570383f80a0ee46c441.png" width="1624" height="1764" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="render-loop">Render Loop<a href="#render-loop" class="hash-link" aria-label="Direct link to Render Loop" title="Direct link to Render Loop">​</a></h2><p>The Render Loop is the process that runs potentially at 120 times every second. That makes sure that all the content is ready to go for each frame.</p><p>First every view that needs it will receive <code>updateConstraints()</code>. And that runs from the leaf most views up to the view hierarchy towards the window. Next, every view receives <code>layoutSubViews()</code>. This runs the opposite direction starting from the window going down towards the leaves. Last, every view gets <code>draw(_:)</code> if it needs it also from the window towards the leaves.</p><p><img loading="lazy" alt="img" src="/assets/images/936C2B28-091F-46AB-8A45-2B12F004E739-d8322cd320c57552ebf9dedc67de1ab0.png" width="2204" height="1086" class="img_ev3q"></p><p>The Render Loop consists of three phases -- Update Constraints, Layout, and Display. They all have the exact same purpose and they have exact parallel sets of methods.</p><table><thead><tr><th>Update Constraints</th><th>Layout</th><th>Display</th></tr></thead><tbody><tr><td>updateConstraints()</td><td>layoutSubViews()</td><td>draw(<!-- -->_<!-- -->:)</td></tr><tr><td>setNeedsUpdateConstraints()</td><td>setNeedsLayout()</td><td>setNeedsDisplay()</td></tr><tr><td>updateConstraintsIfNeeded()</td><td>layoutIfNeeded()</td><td></td></tr></tbody></table><p><code>setNeedsLayout</code> 是异步的，不要直接调用 <code>layoutSubviews</code>，我们自定义的 <code>UIView</code> 可以重载 <code>layoutSubviews</code>，用于调整子视图的 frame。</p><p>You should not call <code>layoutSubviews</code> directly. If you want to force a layout update, call the <code>setNeedsLayout</code> method instead to do so. This method makes a note of the request and returns immediately. Because this method does not force an immediate update, but instead waits for the next update cycle, you can use it to invalidate the layout of multiple views before any of those views are updated. This behavior allows you to consolidate all of your layout updates to one update cycle, which is usually better for performance.</p><p>If you want to update the layout of your views immediately, call the <code>layoutIfNeeded()</code> method. If no layout updates are pending, this method exits without modifying the layout or calling any layout-related callbacks.</p><p><code>setNeedsDisplay</code> 是异步的，不要直接调用 <code>drawRect:</code>，我们自定义的 <code>UIView</code> 可以重载 <code>drawRect:</code>，用于绘制自定义的内容。</p><p><code>drawRect:</code> Subclasses that use technologies such as Core Graphics and UIKit to draw their view’s content should override this method and implement their drawing code there. UIKit creates and configures a graphics context for drawing and adjusts the transform of that context so that its origin matches the origin of your view’s bounds rectangle. You can get a reference to the graphics context using the <code>UIGraphicsGetCurrentContext</code> function, but do not establish a strong reference to the graphics context because it can change between calls to the <code>drawRect:</code> method.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="auto-layout">Auto Layout<a href="#auto-layout" class="hash-link" aria-label="Direct link to Auto Layout" title="Direct link to Auto Layout">​</a></h2><p><a href="https://developer.apple.com/videos/play/wwdc2018/220/" target="_blank" rel="noopener noreferrer">WWDC 2018 - High Performance Auto Layout</a></p><p>iOS 布局发展：Frame -&gt; AutoLayout (iOS 6, Apple VSL, Masonry, SnapKit) -&gt; UIStackView (iOS 9, 模仿前端 Flexbox 布局思路) -&gt; SwiftUI (iOS 13)</p><p>1997 年 Auto Layout 用到的布局算法 Cassowary 被发明了出来，它能够有效解析线性等式系统和线性不等式系统，用来表示用户界面中那些相等关系和不等关系。</p><p>使用 Auto Layout 和手写布局的区别，就是多了自动布局引擎（统一管理布局的创建、更新和销毁），以及约束的计算。</p><p>iOS 12 的 Auto Layout 更多地利用了 Cassowary 算法的界面更新策略，使其真正完成了高效的界面线性策略计算。可以放心使用了。</p><p>Auto Layout 与 Frame 的区别是多了布局引擎。当约束发生变化后时，会触发 Deffered Layout Pass（延迟布局传递），并做容错处理（约束丢失、冲突等情况），并把 view 标记为 dirty。当下一次刷新屏幕动作来临（或者是调用 <code>layoutIfNeeded</code>）时，引擎会从顶向下调用 <code>layoutSubviews</code>，通过 Cassowary 算法计算各个子视图的位置，得到 frames，接下来的过程就跟手写 frame 是一样的了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="抗拉伸抗压缩">抗拉伸、抗压缩<a href="#抗拉伸抗压缩" class="hash-link" aria-label="Direct link to 抗拉伸、抗压缩" title="Direct link to 抗拉伸、抗压缩">​</a></h2><p>Content Hugging Priority: 值越大，越不容易被拉伸</p><p>Content Compression Resistance Priority: 值越大，越不容易被压缩</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">|</span><span class="token plain">UIImageView</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">UILabel</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">UILabel</span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>两个 Label 都是根据内容自适应动态宽度；</p><p>当两个 Label 的长度加起来不足屏幕宽度时，Auto Layout 不知道优先拉伸哪一个，此时 Content Hugging Priority 起作用；</p><p>当两个 Label 的长度加起来超过了屏幕宽度时，Auto Layout 不知道先压缩哪个，此时 Content Compression Resistance Priority 起作用。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="contentmode"><a href="https://developer.apple.com/documentation/uikit/uiview/contentmode" target="_blank" rel="noopener noreferrer">contentMode</a><a href="#contentmode" class="hash-link" aria-label="Direct link to contentmode" title="Direct link to contentmode">​</a></h2><p><img loading="lazy" alt="image" src="/assets/images/iPhone屏幕适配-028377e0e09a597b486746ade1a36bb7.png" width="1664" height="1624" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hittest"><a href="https://developer.apple.com/documentation/uikit/uiview/1622469-hittest" target="_blank" rel="noopener noreferrer">hitTest</a><a href="#hittest" class="hash-link" aria-label="Direct link to hittest" title="Direct link to hittest">​</a></h2><p><code>func hitTest(_ point: CGPoint, with event: UIEvent?) -&gt; UIView?</code></p><p>Returns the farthest descendant of the receiver in the view hierarchy (including itself) that contains a specified point.</p><p>This method traverses the view hierarchy by calling the <code>point(inside:with:)</code> method of each subview to determine which subview should receive a touch event. If <code>point(inside:with:)</code> returns true, then the subview’s hierarchy is similarly traversed until the frontmost view containing the specified point is found.</p><p><code>func point(inside point: CGPoint, with event: UIEvent?) -&gt; Bool</code></p><p>Returns a Boolean value indicating whether the receiver contains the specified point.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="clipstobounds">clipsToBounds<a href="#clipstobounds" class="hash-link" aria-label="Direct link to clipsToBounds" title="Direct link to clipsToBounds">​</a></h2><p>By default, when a subview’s visible area extends outside of the bounds of its superview, no clipping of the subview&#x27;s content occurs. Use the <code>clipsToBounds</code> property to change that behavior.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="frame-and-bounds">frame and bounds<a href="#frame-and-bounds" class="hash-link" aria-label="Direct link to frame and bounds" title="Direct link to frame and bounds">​</a></h2><p><code>frame</code>: The frame rectangle, which describes the view’s location and size in its superview’s coordinate system.</p><p><code>bounds</code>: The bounds rectangle, which describes the view’s location and size in its own coordinate system.</p><p><code>UIView</code> 自己的坐标系的<strong>原点</strong>，就是它的 <code>frame</code> 的 <code>origin</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="autoresizingmask">autoresizingMask<a href="#autoresizingmask" class="hash-link" aria-label="Direct link to autoresizingMask" title="Direct link to autoresizingMask">​</a></h2><p><code>autoresizingMask</code> is an integer bit mask that determines how the receiver resizes itself when its superview’s bounds change.</p><p>When a view’s bounds change, that view automatically resizes its subviews according to each subview’s autoresizing mask. You specify the value of this mask by combining the constants described in UIView.AutoresizingMask using the C bitwise OR operator. Combining these constants lets you specify which dimensions of the view should grow or shrink relative to the superview. The default value of this property is none, which indicates that the view should not be resized at all.</p><p>When more than one option along the same axis is set, the default behavior is to distribute the size difference proportionally among the flexible portions. The larger the flexible portion, relative to the other flexible portions, the more it is likely to grow. For example, suppose this property includes the flexibleWidth and flexibleRightMargin constants but does not include the flexibleLeftMargin constant, thus indicating that the width of the view’s left margin is fixed but that the view’s width and right margin may change. Thus, the view appears anchored to the left side of its superview while both the view width and the gap to the right of the view increase.</p><p>If the autoresizing behaviors do not offer the precise layout that you need for your views, you can use a custom container view and override its layoutSubviews() method to position your subviews more precisely.</p><p><code>translatesAutoresizingMaskIntoConstraints</code> is a Boolean value that determines whether the view’s autoresizing mask is translated into Auto Layout constraints.</p><p>If this property’s value is true, the system creates a set of constraints that duplicate the behavior specified by the view’s autoresizing mask. This also lets you modify the view’s size and location using the view’s frame, bounds, or center properties, allowing you to create a static, frame-based layout within Auto Layout.</p><p>Note that the autoresizing mask constraints fully specify the view’s size and position; therefore, you cannot add additional constraints to modify this size or position without introducing conflicts. If you want to use Auto Layout to dynamically calculate the size and position of your view, you must set this property to false, and then provide a non ambiguous, nonconflicting set of constraints for the view.</p><p>By default, the property is set to true for any view you programmatically create. If you add views in Interface Builder, the system automatically sets this property to false.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="横屏">横屏<a href="#横屏" class="hash-link" aria-label="Direct link to 横屏" title="Direct link to 横屏">​</a></h2><p><code>UIViewController</code>:</p><p><code>- (BOOL)shouldAutorotate {}</code></p><p><code>- (UIInterfaceOrientationMask)supportedInterfaceOrientations {}</code></p><p>When the device orientation changes, <strong>the system calls this method on the root view controller or the topmost modal view controller that fills the window</strong>. If the view controller supports the new orientation, the system rotates the window and the view controller. The system only calls this method if the view controller&#x27;s <code>shouldAutorotate</code> method returns <code>YES</code>.</p><p>To determine whether to rotate, the system compares the <strong>view controller&#x27;s supported orientations</strong> with the <strong>app&#x27;s supported orientations</strong> — as determined by the Info.plist file or the app delegate&#x27;s <code>application:supportedInterfaceOrientationsForWindow:</code> method — and the <strong>device&#x27;s supported orientations</strong>.（iOS devices without a Home button, such as iPhone 12, don’t support <code>UIInterfaceOrientationMaskPortraitUpsideDown</code> orientation)</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">pragma</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">mark </span><span class="token macro property expression operator" style="color:#393A34">-</span><span class="token macro property expression" style="color:#36acaa"> 禁止横屏</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">shouldAutorotate </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> NO</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UIInterfaceOrientationMask</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">supportedInterfaceOrientations </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> UIInterfaceOrientationMaskPortrait</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="状态栏颜色">状态栏颜色<a href="#状态栏颜色" class="hash-link" aria-label="Direct link to 状态栏颜色" title="Direct link to 状态栏颜色">​</a></h2><p>状态栏的颜色由 <code>UIViewController</code> 决定，<code>AppDelegate</code> 调用 <code>rootViewController</code> 的 <code>preferredStatusBarStyle</code> 方法决定状态栏颜色。</p><p><code>- (UIStatusBarStyle)preferredStatusBarStyle {}</code> 通常用这个方法返回状态栏颜色。</p><p><code>- (UIViewController *)childViewControllerForStatusBarStyle {}</code> 通常用在 <code>UINavigationController</code> 的场景，告诉 UIKit 我希望用哪个 <code>UIViewController</code> 返回的状态栏颜色。</p><p><code>setNeedsStatusBarAppearanceUpdate</code> Call this method if the view controller&#x27;s status bar attributes, such as hidden/unhidden status or style, change. If you call this method within an animation block, the changes are animated along with the rest of the animation block.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uiviewcontroller">UIViewController<a href="#uiviewcontroller" class="hash-link" aria-label="Direct link to UIViewController" title="Direct link to UIViewController">​</a></h2><p><img loading="lazy" alt="img" src="/assets/images/8376D74D-9BC0-42C7-92E6-CF0608A85CF8-2e1e980234c2f49ca15cb6d1800e2ff7.png" width="690" height="630" class="img_ev3q"></p><p>添加子 VC：</p><div class="language-objc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 来自 UIKit 的接口注释：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// addChildViewController: will call [child willMoveToParentViewController:self] before adding the child.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// However, it will not call didMoveToParentViewController:.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token plain"> addChildViewController</span><span class="token punctuation" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flutterVC</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">view addSubview</span><span class="token punctuation" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flutterVC</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">view</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flutterVC didMoveToParentViewController</span><span class="token punctuation" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>移除子 VC：</p><div class="language-objc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 来自 UIKit 的接口注释：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Similarly, removeFromParentViewController does not call [self willMoveToParentViewController:nil] before removing the child.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flutterVC willMoveToParentViewController</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">nil</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flutterVC</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">view removeFromSuperview</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flutterVC removeFromParentViewController</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flutterVC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nil</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>添加子 VC 后，父 VC 的事件会向子 VC 传递：</p><ul><li>生命周期事件：<code>viewWillAppear</code>, <code>viewDidAppear</code>, <code>viewWillDisappear</code>, <code>viewDidDisappear</code></li><li>旋转事件：<code>willRotateToInterfaceOrientation:duration:</code>, <code>willAnimateRotationToInterfaceOrientation:duration:</code>, <code>didRotateFromInterfaceOrientation:</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uiapplication">UIApplication<a href="#uiapplication" class="hash-link" aria-label="Direct link to UIApplication" title="Direct link to UIApplication">​</a></h2><p><a href="https://developer.apple.com/documentation/uikit/uiapplication/1623097-ignoresnapshotonnextapplicationl?language=objc" target="_blank" rel="noopener noreferrer">ignoreSnapshotOnNextApplicationLaunch</a></p><p>Swipe up from the bottom to the middle of your screen and hold until you see the App Switcher.</p><p>进入 App Switcher 时不会触发 <code>applicationDidEnterBackground</code>，要回到主屏幕时才会触发。</p><p>进入 App Switcher 后退出 App（iOS 13+）：（注意，<code>applicationDidEnterBackground</code> 没有调用的）</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Demo[9565:1006064] -[SceneDelegate sceneWillResignActive:]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Demo[9565:1006064] -[SceneDelegate sceneDidDisconnect:]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Demo[9565:1006064] -[AppDelegate applicationWillTerminate:]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>进入 App Switcher 后退出 App（iOS 12）：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Demo[9598:1013427] -[AppDelegate applicationDidEnterBackground:]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Demo[9598:1013427] -[AppDelegate applicationWillTerminate:]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="img" src="/assets/images/7C67368A-1D86-41E0-9D24-B4D210340990-9d6ca9e0db65c9fd25b6c371470f64ce.png" width="1466" height="1062" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uigesturerecognizer">UIGestureRecognizer<a href="#uigesturerecognizer" class="hash-link" aria-label="Direct link to UIGestureRecognizer" title="Direct link to UIGestureRecognizer">​</a></h2><p>UIGestureRecognizer 有个方法叫做 requireGestureRecognizerToFail，他可以指定某一个 recognizer，即便自己已经满足条件了，也不会立刻触发，会等到该指定的 recognizer 确定失败之后才触发。</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 优先响应屏幕右滑返回</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UIGestureRecognizer </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">gestRecognizer in self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">navigationController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">view</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gestureRecognizers</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">gestRecognizer isKindOfClass</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIScreenEdgePanGestureRecognizer class</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">自定义手势 requireGestureRecognizerToFail</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">gestRecognizer</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 我们自己添加的手势，需要抠边返回手势确认失败再触发</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="截图">截图<a href="#截图" class="hash-link" aria-label="Direct link to 截图" title="Direct link to 截图">​</a></h2><p>仅网页场景需要使用 <code>renderLayerInContext</code> 进行重绘，其它的缩略图统一都用 <code>drawViewHierarchyInRect</code>（快）。</p><div class="language-objc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UIImage </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">thumbnail </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">_thumbnail</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UIGraphicsImageRendererFormat </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">format </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIGraphicsImageRendererFormat alloc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> init</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        format</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">scale </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 控制内存消耗</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UIGraphicsImageRenderer </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">renderer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIGraphicsImageRenderer alloc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> initWithSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bounds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size format</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">format</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _thumbnail </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">renderer imageWithActions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">^</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UIGraphicsImageRendererContext </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">_Nonnull rendererContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token plain"> drawViewHierarchyInRect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bounds afterScreenUpdates</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">NO</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> _thumbnail</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UIImage </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">thumbnail </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">_thumbnail</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UIGraphicsImageRendererFormat </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">format </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIGraphicsImageRendererFormat alloc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> init</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        format</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">scale </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 控制内存消耗</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UIGraphicsImageRenderer </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">renderer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIGraphicsImageRenderer alloc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> initWithSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bounds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size format</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">format</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _thumbnail </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">renderer imageWithActions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">^</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UIGraphicsImageRendererContext </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">_Nonnull rendererContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">@try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">layer renderInContext</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">rendererContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CGContext</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">@catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NSException </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">exception</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> _thumbnail</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uipasteboard">UIPasteboard<a href="#uipasteboard" class="hash-link" aria-label="Direct link to UIPasteboard" title="Direct link to UIPasteboard">​</a></h2><p>For sharing data with any other app, use the systemwide <strong>general pasteboard</strong>.</p><p>For sharing data with another app from your team—that has the same team ID as the app to share from—use <strong>named pasteboards</strong>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/yianzhou/yianzhou.github.io/docs/apple/Frameworks/UIKit.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/apple/Frameworks/SDWebImage"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">SDWebImage</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/apple/Frameworks/app-extension"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">App Extension</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#iphone-x-screen" class="table-of-contents__link toc-highlight">iPhone X Screen</a></li><li><a href="#render-loop" class="table-of-contents__link toc-highlight">Render Loop</a></li><li><a href="#auto-layout" class="table-of-contents__link toc-highlight">Auto Layout</a></li><li><a href="#抗拉伸抗压缩" class="table-of-contents__link toc-highlight">抗拉伸、抗压缩</a></li><li><a href="#contentmode" class="table-of-contents__link toc-highlight">contentMode</a></li><li><a href="#hittest" class="table-of-contents__link toc-highlight">hitTest</a></li><li><a href="#clipstobounds" class="table-of-contents__link toc-highlight">clipsToBounds</a></li><li><a href="#frame-and-bounds" class="table-of-contents__link toc-highlight">frame and bounds</a></li><li><a href="#autoresizingmask" class="table-of-contents__link toc-highlight">autoresizingMask</a></li><li><a href="#横屏" class="table-of-contents__link toc-highlight">横屏</a></li><li><a href="#状态栏颜色" class="table-of-contents__link toc-highlight">状态栏颜色</a></li><li><a href="#uiviewcontroller" class="table-of-contents__link toc-highlight">UIViewController</a></li><li><a href="#uiapplication" class="table-of-contents__link toc-highlight">UIApplication</a></li><li><a href="#uigesturerecognizer" class="table-of-contents__link toc-highlight">UIGestureRecognizer</a></li><li><a href="#截图" class="table-of-contents__link toc-highlight">截图</a></li><li><a href="#uipasteboard" class="table-of-contents__link toc-highlight">UIPasteboard</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">粤ICP备15029205号 Copyright © 2023 yianzhou</div></div></div></footer></div>
<script src="/assets/js/runtime~main.217ba8b0.js"></script>
<script src="/assets/js/main.6346b9aa.js"></script>
</body>
</html>